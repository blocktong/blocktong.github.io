{"pageProps":{"post":{"title":"ë£¨ìŠ¤íŠ¸ë¡œ ë¸”ë¡ì²´ì¸ êµ¬í˜„í•˜ê¸°","description":"","date":"2024-05-05 17:33","slug":"2024-05-05-ImplementingaBlockchaininRust","content":"\n\n![Implementing a Blockchain in Rust](/assets/img/2024-05-05-ImplementingaBlockchaininRust_0.png)\n\nì•ˆë…•í•˜ì„¸ìš”! ì´ ê¸°ì‚¬ëŠ” Rustì—ì„œ ê¸°ë³¸ì ì¸ ë¸”ë¡ì²´ì¸ì„ êµ¬í˜„í•˜ëŠ” ë‹¨ê³„ë³„ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë¸”ë¡ êµ¬ì¡°ì˜ ì´ˆê¸° ì„¤ì •ë¶€í„° ì‹œì‘í•˜ì—¬ ê³ ìœ  ì‹ë³„ìì™€ ì•”í˜¸ í•´ì‹œë¥¼ í¬í•¨í•˜ê³ , ë¸”ë¡ ìƒì„±, ì±„êµ´, ê·¸ë¦¬ê³  ìœ íš¨ì„± ê²€ì‚¬ë¡œ ê·¸ ê¸°ì´ˆë¥¼ ë§ˆë ¨í•©ë‹ˆë‹¤. ê° í•¨ìˆ˜ì˜ ë°‘ë°”íƒ•ê³¼ ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•˜ì—¬ ì‘ì—… ì¦ëª…, ë…¼ìŠ¤ ê³„ì‚°, ë¸”ë¡ì²´ì¸ì˜ ë¬´ê²°ì„±ê³¼ ì—°ì†ì„±ì„ ìœ ì§€í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì— ëŒ€í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤.\n\nì°¸ê³ : ì´ëŠ” í•™ìŠµ ëª©ì ì„ ìœ„í•œ ë² ì–´ë³¸ê³¼ ê¸°ë³¸ ë¸”ë¡ì²´ì¸ êµ¬í˜„ì´ë©° í”„ë¡œë•ì…˜ í™˜ê²½ì—ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤! :)\n\nì, í•¨ê»˜ Rustaceans ì—¬ëŸ¬ë¶„, ë°”ë¡œ ë“¤ì–´ê°€ ë´…ì‹œë‹¤!\n\n\n\n# ê¸°ë³¸ ì‚¬í•­\n\në¸”ë¡ì²´ì¸ì˜ P2P ë„¤íŠ¸ì›Œí¬ ìƒí˜¸ì‘ìš© ì²˜ë¦¬ì—ì„œ í•µì‹¬ ê°œë…ê³¼ ì£¼ìš” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n## ë…¸ë“œì™€ í”¼ì–´ ì°¾ê¸°\n\n- ë…¸ë“œ ì‹ë³„: ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ê° ë…¸ë“œëŠ” ì•”í˜¸í™” í‚¤ ìŒì—ì„œ íŒŒìƒëœ ê³ ìœ  ì‹ë³„ìë¥¼ ê°–ìŠµë‹ˆë‹¤.\n- í”¼ì–´ ì°¾ê¸°: ë…¸ë“œëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ í˜•ì„±í•˜ê¸° ìœ„í•´ ì„œë¡œë¥¼ ë°œê²¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë¦¬ ì •ì˜ëœ í”¼ì–´(ì •ì  êµ¬ì„±), DNS ê¸°ë°˜ ë°œê²¬, ë˜ëŠ” ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ë°œê²¬ì„ ìœ„í•´ mDNSì™€ ê°™ì€ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ë“±, ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì´ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ë¶€íŠ¸ìŠ¤íŠ¸ë© ë…¸ë“œ: ìƒˆë¡œìš´ ë…¸ë“œëŠ” ì¢…ì¢… ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì•Œë ¤ì§„ ë…¸ë“œ(ë¶€íŠ¸ìŠ¤íŠ¸ë© ë…¸ë“œ)ì— ì—°ê²°í•˜ì—¬ ë¹ ë¥´ê²Œ ë„¤íŠ¸ì›Œí¬ì— í†µí•©ë©ë‹ˆë‹¤.\n\n\n\n## ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œ\n\n- í”„ë¡œí† ì½œ ìŠ¤íƒ: ë¸”ë¡ì²´ì¸ P2P ë„¤íŠ¸ì›Œí¬ëŠ” íŠ¹ì • í”„ë¡œí† ì½œ ìŠ¤íƒì„ ì‚¬ìš©í•˜ì—¬ í†µì‹ í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œë¡œëŠ” ê¸°ë³¸ ì „ì†¡ì„ ìœ„í•œ TCP/IPì™€ ì•ˆì „í•œ í†µì‹ ì„ ìœ„í•œ ì•”í˜¸ í”„ë¡œí† ì½œ(ì˜ˆ: TLS ë˜ëŠ” Noise)ì´ ìˆìŠµë‹ˆë‹¤.\n- ë©”ì‹œì§• í”„ë¡œí† ì½œ: Floodsubì´ë‚˜ Gossipsubê³¼ ê°™ì€ í”„ë¡œí† ì½œì€ ë©”ì‹œì§€ ë°©ì†¡ ë° ë„¤íŠ¸ì›Œí¬ ì „íŒŒë¥¼ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n## ë°ì´í„° ì „íŒŒ ë° ë™ê¸°í™”\n\n- ë°©ì†¡: ë…¸ë“œëŠ” íŠ¸ëœì­ì…˜ ë° ìƒˆë¡­ê²Œ ì±„êµ´ëœ ë¸”ë¡ì„ ë„¤íŠ¸ì›Œí¬ë¡œ ë°©ì†¡í•˜ì—¬ ëª¨ë“  ì°¸ê°€ìê°€ ìµœì‹  ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡í•©ë‹ˆë‹¤.\n- ì²´ì¸ ë™ê¸°í™”: ë…¸ë“œëŠ” ë¸”ë¡ì²´ì¸ ë³µì‚¬ë³¸ì„ ê°€ì¥ ê¸´ ì²´ì¸(ì¼ë°˜ì ìœ¼ë¡œ ìœ íš¨í•œ ê²ƒìœ¼ë¡œ ì¸ì •ë¨)ì— ë™ê¸°í™”í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.\n- í•©ì˜ ë©”ì»¤ë‹ˆì¦˜: í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì¸ ì‘ì—… ì¦ëª…(PoW) ë˜ëŠ” ì§€ë¶„ ì¦ëª…(PoS) ë“±ì´ ìƒˆë¡œìš´ ë¸”ë¡ì„ ê²€ì¦í•˜ê³  ì¶”ê°€í•˜ê¸°ìœ„í•´ íŠ¹íˆ ë¸”ë¡ì²´ì¸ì˜ ìƒíƒœì— ëŒ€í•œ í•©ì˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n\n\nì´ëŸ¬í•œ í•µì‹¬ ê°œë…ì„ ì´í•´í–ˆë‹¤ë©´, ì´ì œ ì½”ë“œë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤!\n\n# cargo.toml â€” ë‹¤ìŒ ì¢…ì†ì„±ì„ ì¶”ê°€í•˜ì„¸ìš”\n\n```toml\n[dependencies]\nchrono = \"0.4\"\nsha2 = \"0.9.8\"\nserde = { version = \"1.0\", features = [\"derive\"] }\nserde_json = \"1.0\"\nlibp2p = { version = \"0.40.0\", features = [\"tcp-tokio\", \"mdns\"] }\ntokio = { version = \"1.0\", features = [\"io-util\", \"io-std\", \"macros\", \"rt\", \"rt-multi-thread\", \"sync\", \"time\"] }\nhex = \"0.4\"\nonce_cell = \"1.5\"\nlog = \"0.4\"\npretty_env_logger = \"0.4\"\n```\n\nìš°ë¦¬ëŠ” ë§ì€ ì‹œê°„ì„ ì¡ì•„ë¨¹ì§€ ì•Šë„ë¡ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šê² ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ P2P êµ¬í˜„ì— ì¤‘ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œì¨ libp2pë¥¼ ì–¸ê¸‰í•´ ë´…ë‹ˆë‹¤.\n\n\n\nì €ëŠ” libp2pì— ëŒ€í•´ ìì„¸í•œ ê¸°ì‚¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ í’ë¶€í•œ Rust í¬ë ˆì´íŠ¸ì— ìµìˆ™í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## blockchain.rs â€” ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° P2P í†µì‹ \n\nìš°ë¦¬ê°€ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° p2p ë°©ë²•ì„ êµ¬í˜„í•  'blockchain.rs'ë¼ëŠ” ìƒˆ íŒŒì¼ì„ ë§Œë“¤ì–´ë´…ì‹œë‹¤.\n\n### ê¸°ë³¸ ì„¤ì •\n\n\n\n- KEYS, PEER_ID, CHAIN_TOPIC, BLOCK_TOPIC: ì´ëŸ¬í•œ ì •ì  ë³€ìˆ˜ëŠ” ì‹ ì›ì„ ìœ„í•œ ì•”í˜¸í™” í‚¤, ë„¤íŠ¸ì›Œí¬ ë…¸ë“œë¥¼ ìœ„í•œ í”¼ì–´ ID, ê·¸ë¦¬ê³  Floodsub í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì²´ì¸ ë° ë¸”ë¡ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì£¼ì œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\n\n```rust\nuse super::{App, Block};\nuse libp2p::{\n    floodsub::{Floodsub, FloodsubEvent, Topic},\n    identity,\n    mdns::{Mdns, MdnsEvent},\n    swarm::{NetworkBehaviourEventProcess, Swarm},\n    NetworkBehaviour, PeerId,\n};\nuse log::{error, info};\nuse once_cell::sync::Lazy;\nuse serde::{Deserialize, Serialize};\nuse std::collections::HashSet;\nuse tokio::sync::mpsc;\n\npub static KEYS: Lazy<identity::Keypair> = Lazy::new(identity::Keypair::generate_ed25519);\npub static PEER_ID: Lazy<PeerId> = Lazy::new(|| PeerId::from(KEYS.public()));\npub static CHAIN_TOPIC: Lazy<Topic> = Lazy::new(|| Topic::new(\"chains\"));\npub static BLOCK_TOPIC: Lazy<Topic> = Lazy::new(|| Topic::new(\"blocks\"));\n```\n\n# ì´ë²¤íŠ¸ ìœ í˜•\n\n- ChainResponse, LocalChainRequest, EventType: ì´ëŸ¬í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ë…¸ë“œê°€ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ ë° ë©”ì‹œì§€ ìœ í˜•ì„ ì •ì˜í•©ë‹ˆë‹¤. ChainResponse ë° LocalChainRequestëŠ” ì²´ì¸ ìš”ì²­ì— ì‘ë‹µí•˜ê³  ë¡œì»¬ ì²´ì¸ ìƒíƒœë¥¼ ìš”ì²­í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n\n\n```rust\n#[derive(Debug, Serialize, Deserialize)]\npub struct ChainResponse {\n    pub blocks: Vec<Block>,\n    pub receiver: String,\n}\n\n#[derive(Debug, Serialize, Deserialize)]\npub struct LocalChainRequest {\n    pub from_peer_id: String,\n}\n\npub enum EventType {\n    LocalChainResponse(ChainResponse),\n    Input(String),\n    Init,\n}\n```\n\n## AppBehaviour\n\n- NetworkBehaviour Implementation (AppBehaviour): This struct implements the NetworkBehaviour trait, combining different behaviours like Floodsub (for pub/sub messaging) and mDNS (for local network peer discovery). It also holds channels for sending responses and initializing events and an instance of the App struct which contains the blockchain logic.\n\n```rust\n#[derive(NetworkBehaviour)]\n#[behaviour(out_event=\"Event\")]\npub struct AppBehaviour {\n    pub floodsub: Floodsub,\n    pub mdns: Mdns,\n    #[behaviour(ignore)]\n    pub response_sender: mpsc::UnboundedSender<ChainResponse>,\n    #[behaviour(ignore)]\n    pub init_sender: mpsc::UnboundedSender<bool>,\n    #[behaviour(ignore)]\n    pub app: App,\n}\n\n#[derive(Debug)]\npub enum Event {\n    ChainResponse(ChainResponse),\n    Floodsub(FloodsubEvent),\n    Mdns(MdnsEvent),\n    Input(String),\n    Init,\n}\n\nimpl From<FloodsubEvent> for Event {\n    fn from(event: FloodsubEvent) -> Self {\n        Self::Floodsub(event)\n    }\n}\n\nimpl From<MdnsEvent> for Event {\n    fn from(event: MdnsEvent) -> Self {\n        Self::Mdns(event)\n    }\n}\n\nimpl AppBehaviour {\n    pub async fn new(\n        app: App,\n        response_sender: mpsc::UnboundedSender<ChainResponse>,\n        init_sender: mpsc::UnboundedSender<bool>,\n    ) -> Self {\n        let mut behaviour = Self {\n            app,\n            floodsub: Floodsub::new(*PEER_ID),\n            mdns: Mdns::new(Default::default())\n                .await\n                .expect(\"can create mdns\"),\n            response_sender,\n            init_sender,\n        };\n\n        behaviour.floodsub.subscribe(CHAIN_TOPIC.clone());\n        behaviour.floodsub.subscribe(BLOCK_TOPIC.clone());\n\n        behaviour\n    }\n}\n```\n\n\n\n# ì´ë²¤íŠ¸ ì²˜ë¦¬\n\n- FloodsubEvent ë° MdnsEventë¥¼ ìœ„í•œ NetworkBehaviourEventProcess: ì´ëŸ¬í•œ êµ¬í˜„ì€ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.\n- Floodsub ì´ë²¤íŠ¸: ìƒˆ ë¸”ë¡, ì²´ì¸ ì‘ë‹µ ë˜ëŠ” ë¡œì»¬ ì²´ì¸ ìš”ì²­ê³¼ ê°™ì€ ë¸”ë¡ì²´ì¸ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìƒˆ ë¸”ë¡ì´ ìˆ˜ì‹ ë˜ë©´ try_add_blockì„ í†µí•´ ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.\n- mDNS ì´ë²¤íŠ¸: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì—ì„œ ìƒˆ í”¼ì–´ì˜ ë°œê²¬ ë˜ëŠ” ê¸°ì¡´ í”¼ì–´ì˜ ì†ì‹¤ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” Floodsub í”„ë¡œí† ì½œì—ì„œ í”¼ì–´ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\n```rust\n// ìˆ˜ì‹  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\nimpl NetworkBehaviourEventProcess<FloodsubEvent> for AppBehaviour {\n    fn inject_event(&mut self, event: FloodsubEvent) {\n        if let FloodsubEvent::Message(msg) = event {\n            if let Ok(resp) = serde_json::from_slice::<ChainResponse>(&msg.data) {\n                if resp.receiver == PEER_ID.to_string() {\n                    info!(\"{}ë¡œë¶€í„° ì‘ë‹µ:\", msg.source);\n                    resp.blocks.iter().for_each(|r| info!(\"{:?}\", r));\n\n                    self.app.blocks = self.app.choose_chain(self.app.blocks.clone(), resp.blocks);\n                }\n            } else if let Ok(resp) = serde_json::from_slice::<LocalChainRequest>(&msg.data) {\n                info!(\"{}ë¡œë¶€í„° ë¡œì»¬ ì²´ì¸ ì „ì†¡\", msg.source.to_string());\n                let peer_id = resp.from_peer_id;\n                if PEER_ID.to_string() == peer_id {\n                    if let Err(e) = self.response_sender.send(ChainResponse {\n                        blocks: self.app.blocks.clone(),\n                        receiver: msg.source.to_string(),\n                    }) {\n                        error!(\"ì±„ë„ì„ í†µí•´ ì‘ë‹µ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ, {}\", e);\n                    }\n                }\n            } else if let Ok(block) = serde_json::from_slice::<Block>(&msg.data) {\n                info!(\"{}ë¡œë¶€í„° ìƒˆ ë¸”ë¡ ìˆ˜ì‹ \", msg.source.to_string());\n                self.app.try_add_block(block);\n            }\n        }\n    }\n}\n\nimpl NetworkBehaviourEventProcess<MdnsEvent> for AppBehaviour {\n    fn inject_event(&mut self, event: MdnsEvent) {\n        match event {\n            MdnsEvent::Discovered(discovered_list) => {\n                for (peer, _addr) in discovered_list {\n                    self.floodsub.add_node_to_partial_view(peer);\n                }\n            }\n            MdnsEvent::Expired(expired_list) => {\n                for (peer, _addr) in expired_list {\n                    if !self.mdns.has_node(&peer) {\n                        self.floodsub.remove_node_from_partial_view(&peer);\n                    }\n                }\n            }\n        }\n    }\n}\r\n```\n\n# ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\n\n\n\n- get_list_peers: ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°œê²¬ëœ í”¼ì–´ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n- handle_print_peers: ì½˜ì†”ì— í”¼ì–´ ëª©ë¡ì„ ë¡œê¹…í•©ë‹ˆë‹¤.\n- handle_print_chain: ë¡œì»¬ ë¸”ë¡ì²´ì¸ ìƒíƒœë¥¼ ê¸°ë¡í•˜ë©°, ë¸”ë¡ì²´ì¸ì˜ ì‹œê°ì  í‘œí˜„ì„ ì œê³µí•©ë‹ˆë‹¤.\n- handle_create_block: ì‚¬ìš©ì ì…ë ¥ì„ ì²˜ë¦¬í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤. ì œê³µëœ ë°ì´í„°ë¡œ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•˜ê³ , ë¡œì»¬ ë¸”ë¡ì²´ì¸ì„ ì—…ë°ì´íŠ¸í•˜ê³ , Floodsubì„ ì‚¬ìš©í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ í”¼ì–´ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸í•©ë‹ˆë‹¤.\n\n```rust\npub fn get_list_peers(swarm: &Swarm<AppBehaviour>) -> Vec<String> {\n    info!(\"ë°œê²¬ëœ í”¼ì–´:\");\n    let nodes = swarm.behaviour().mdns.discovered_nodes();\n    let mut unique_peers = HashSet::new();\n    for peer in nodes {\n        unique_peers.insert(peer);\n    }\n    unique_peers.iter().map(|p| p.to_string()).collect()\n}\n\npub fn handle_print_peers(swarm: &Swarm<AppBehaviour>) {\n    let peers = get_list_peers(swarm);\n    peers.iter().for_each(|p| info!(\"{}\", p));\n}\n\npub fn handle_print_chain(swarm: &Swarm<AppBehaviour>) {\n    info!(\"ë¡œì»¬ ë¸”ë¡ì²´ì¸:\");\n    let pretty_json =\n        serde_json::to_string_pretty(&swarm.behaviour().app.blocks).expect(\"can jsonify blocks\");\n    info!(\"{}\", pretty_json);\n}\n\npub fn handle_create_block(cmd: &str, swarm: &mut Swarm<AppBehaviour>) {\n    if let Some(data) = cmd.strip_prefix(\"create b\") {\n        let behaviour = swarm.behaviour_mut();\n        let latest_block = behaviour\n            .app\n            .blocks\n            .last()\n            .expect(\"ì ì–´ë„ í•˜ë‚˜ì˜ ë¸”ë¡ì´ ìˆì–´ì•¼ í•¨\");\n        let block = Block::new(\n            latest_block.id + 1,\n            latest_block.hash.clone(),\n            data.to_owned(),\n        );\n        let json = serde_json::to_string(&block).expect(\"can jsonify request\");\n        behaviour.app.blocks.push(block);\n        info!(\"ìƒˆ ë¸”ë¡ì„ ë¸Œë¡œë“œìºìŠ¤íŒ… ì¤‘\");\n        behaviour\n            .floodsub\n            .publish(BLOCK_TOPIC.clone(), json.as_bytes());\n    }\n}\n```\n\n# main.rs â€” Main Loop ë° ë¸”ë¡ ì±„êµ´\n\nì´ì œ 'main.rs'ë¼ëŠ” ìƒˆ íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë©”ì¸ ë£¨í”„ì™€ ë¸”ë¡ ì±„êµ´ì„ ë‹´ë‹¹í•  ê²ƒì…ë‹ˆë‹¤. ì½”ì–´ ë¡œì§ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:\n\n\n\n# ë¸”ë¡ êµ¬ì¡°\n\në¸”ë¡ êµ¬ì¡°ì²´ëŠ” ë¸”ë¡ì²´ì¸ ë‚´ì˜ ë¸”ë¡ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë©ë‹ˆë‹¤:\n\n- id: ë¸”ë¡ì˜ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤.\n- hash: ë¸”ë¡ì˜ í•´ì‹œì…ë‹ˆë‹¤.\n- previous_hash: ì²´ì¸ ë‚´ ì´ì „ ë¸”ë¡ì˜ í•´ì‹œì…ë‹ˆë‹¤.\n- timestamp: ë¸”ë¡ì˜ ìƒì„± ì‹œê°„ì…ë‹ˆë‹¤.\n- data: ë¸”ë¡ì˜ ë°ì´í„° ë˜ëŠ” í˜ì´ë¡œë“œì…ë‹ˆë‹¤.\n- nonce: ì±„êµ´ ê³¼ì • ì¤‘ ì‚¬ìš©ë˜ëŠ” ê°’ì…ë‹ˆë‹¤.\n\n```rust\nuse std::io::{Read, Write};\nuse chrono::prelude::*;\nuse libp2p::{\n    core::upgrade,\n    futures::StreamExt,\n    mplex,\n    noise::{Keypair, NoiseConfig, X25519Spec},\n    swarm::{Swarm, SwarmBuilder},\n    tcp::TokioTcpConfig,\n    Transport,\n};\nuse log::{error, info, warn};\nuse serde::{Deserialize, Serialize};\nuse sha2::{Digest, Sha256};\nuse std::time::Duration;\nuse tokio::{\n    io::{stdin, AsyncBufReadExt, BufReader},\n    select, spawn,\n    sync::mpsc,\n    time::sleep,\n};\n\nconst DIFFICULTY_PREFIX: &str = \"00\";\n\nmod blockchain;\npub struct App {\n    pub blocks: Vec<Block>,\n}\n\n#[derive(Serialize, Deserialize, Debug, Clone)]\npub struct Block {\n    pub id: u64,\n    pub hash: String,\n    pub previous_hash: String,\n    pub timestamp: i64,\n    pub data: String,\n    pub nonce: u64,\n}\n```\n\n\n\n# ë¸”ë¡ ìƒì„± (ìƒˆë¡œìš´ ê¸°ëŠ¥)\n\në¸”ë¡ êµ¬í˜„ ë¸”ë¡(DOM)ì— ìˆëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ mine_block í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¸”ë¡ì˜ í•´ì‹œì™€ ë…¼ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì†ì„±ë“¤ì€ ì…ë ¥ ê°’ê³¼ í˜„ì¬ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.\n\n```rust\nimpl Block {\n    pub fn new(id: u64, previous_hash: String, data: String) -> Self {\n        let now = Utc::now();\n        let (nonce, hash) = mine_block(id, now.timestamp(), &previous_hash, &data);\n        Self {\n            id,\n            hash,\n            timestamp: now.timestamp(),\n            previous_hash,\n            data,\n            nonce,\n        }\n    }\n}\n```\n\n# í•´ì‹œ ê³„ì‚° (calculate_hash í•¨ìˆ˜)\n\n\n\n`calculate_hash` í•¨ìˆ˜ëŠ” ë¸”ë¡ì˜ í•´ì‹œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì˜ ì†ì„±ì„ JSON ê°ì²´ë¡œ ë§Œë“¤ê³  ì´ ë°ì´í„°ë¥¼ í•´ì‹œí•˜ê¸° ìœ„í•´ SHA-256 ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n```rust\nfn calculate_hash(id: u64, timestamp: i64, previous_hash: &str, data: &str, nonce: u64) -> Vec<u8> {\n    let data = serde_json::json!({\n        \"id\": id,\n        \"previous_hash\": previous_hash,\n        \"data\": data,\n        \"timestamp\": timestamp,\n        \"nonce\": nonce\n    });\n    let mut hasher = Sha256::new();\n    hasher.update(data.to_string().as_bytes());\n    hasher.finalize().as_slice().to_owned()\n}\n```\n\n## ì±„êµ´ (mine_block í•¨ìˆ˜)\n\n`mine_block`ì€ ì‘ì—… ì¦ëª… ì•Œê³ ë¦¬ì¦˜ì´ êµ¬í˜„ëœ ê³³ì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” nonce ê°’ì„ ë°˜ë³µí•˜ì—¬ íŠ¹ì • ì ‘ë‘ì‚¬(ë‚œì´ë„ ì ‘ë‘ì‚¬ë¡œ ì •ì˜ë¨)ë¡œ ì‹œì‘í•˜ëŠ” í•´ì‹œë¥¼ ì°¾ìœ¼ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ìœ íš¨í•œ í•´ì‹œê°€ ë°œê²¬ë˜ë©´ í•¨ìˆ˜ëŠ” nonceì™€ í•´ë‹¹ í•´ì‹œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n\n\n```rust\nfn mine_block(id: u64, timestamp: i64, previous_hash: &str, data: &str) -> (u64, String) {\n    info!(\"ë¸”ë¡ ì±„êµ´ ì¤‘...\");\n    let mut nonce = 0;\n\n    loop {\n        if nonce % 100000 == 0 {\n            info!(\"ë…¼ìŠ¤: {}\", nonce);\n        }\n        let hash = calculate_hash(id, timestamp, previous_hash, data, nonce);\n        let binary_hash = hash_to_binary_representation(&hash);\n        if binary_hash.starts_with(DIFFICULTY_PREFIX) {\n            info!(\n                \"ì±„êµ´ ì„±ê³µ! ë…¼ìŠ¤: {}, í•´ì‹œ: {}, ì´ì§„ í•´ì‹œ: {}\",\n                nonce,\n                hex::encode(&hash),\n                binary_hash\n            );\n            return (nonce, hex::encode(hash));\n        }\n        nonce += 1;\n    }\n}\n```\n\n# ì´ì§„ í•´ì‹œ í‘œí˜„ (hash_to_binary_representation í•¨ìˆ˜)\n\ní•´ì‹œë¥¼ í•´ë‹¹ ì´ì§„ í‘œí˜„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ëŠ” ì±„êµ´ ê³¼ì •ì—ì„œ í•´ì‹œê°€ ë‚œì´ë„ ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n```rust\nfn hash_to_binary_representation(hash: &[u8]) -> String {\n    let mut res: String = String::default();\n    for c in hash {\n        res.push_str(&format!(\"{:b}\", c));\n    }\n    res\n}\n```\n\n\n\n# ì œë„¤ì‹œìŠ¤ ë¸”ë¡ (genesis í•¨ìˆ˜)\n\nì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì—ì„œ ì²« ë²ˆì§¸ ë¸”ë¡ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¡œ, ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì´ë¼ê³  ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ìˆ˜ë™ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.\n\n```rust\nimpl App {\n    fn new() -> Self {\n        Self { blocks: vec![] }\n    }\n\n    fn genesis(&mut self) {\n        let genesis_block = Block {\n            id: 0,\n            timestamp: Utc::now().timestamp(),\n            previous_hash: String::from(\"genesis\"),\n            data: String::from(\"genesis!\"),\n            nonce: 2836,\n            hash: \"0000f816a87f806bb0073dcf026a64fb40c946b5abee2573702828694d5b4c43\".to_string(),\n        };\n        self.blocks.push(genesis_block);\n    }\n```\n\n# ë¸”ë¡ ì¶”ê°€í•˜ê¸° (try_add_block í•¨ìˆ˜)\n\n\n\n`try_add_block` í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì— ìƒˆë¡œìš´ ë¸”ë¡ì„ ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë¨¼ì €, ìƒˆë¡œìš´ ë¸”ë¡ì„ ìµœì‹  ë¸”ë¡ê³¼ ê²€ì¦í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë¸”ë¡ì´ ìœ íš¨í•˜ë©´ ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.\n\n```rust\nfn try_add_block(&mut self, block: Block) {\n    let latest_block = self.blocks.last().expect(\"there is at least one block\");\n    if self.is_block_valid(&block, latest_block) {\n        self.blocks.push(block);\n    } else {\n        error!(\"could not add block - invalid\");\n    }\n}\n```\n\n## ë¸”ë¡ ìœ íš¨ì„± ê²€ì‚¬ (is_block_valid í•¨ìˆ˜)\n\nì´ í•¨ìˆ˜ëŠ” ì´ì „ ë¸”ë¡ì— ëŒ€í•´ ë¸”ë¡ì„ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒì„ í™•ì¸í•©ë‹ˆë‹¤:\n\n\n\n- ì´ì „ í•´ì‹œ í•„ë“œëŠ” ì´ì „ ë¸”ë¡ì˜ í•´ì‹œì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.\n- í•´ì‹œ ë‚œì´ë„ ìˆ˜ì¤€ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤.\n- ë¸”ë¡ IDê°€ ì´ì „ ë¸”ë¡ì˜ IDë¥¼ ë”°ë¦…ë‹ˆë‹¤.\n- ë¸”ë¡ í•´ì‹œê°€ ìœ íš¨í•©ë‹ˆë‹¤.\n\n```rust\nfn is_block_valid(&self, block: &Block, previous_block: &Block) -> bool {\n    if block.previous_hash != previous_block.hash {\n        warn!(\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ì˜ëª»ëœ ì´ì „ í•´ì‹œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\", block.id);\n        return false;\n    } else if !hash_to_binary_representation(\n        &hex::decode(&block.hash).expect(\"16ì§„ìˆ˜ë¡œ ë””ì½”ë”©í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\"),\n    )\n        .starts_with(DIFFICULTY_PREFIX)\n    {\n        warn!(\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìœ íš¨í•˜ì§€ ì•Šì€ ë‚œì´ë„ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\", block.id);\n        return false;\n    } else if block.id != previous_block.id + 1 {\n        warn!(\n            \"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìµœì‹  ë¸”ë¡ ì´í›„ì˜ ë‹¤ìŒ ë¸”ë¡ì´ ì•„ë‹™ë‹ˆë‹¤: {}\",\n            block.id, previous_block.id\n        );\n        return false;\n    } else if hex::encode(calculate_hash(\n        block.id,\n        block.timestamp,\n        &block.previous_hash,\n        &block.data,\n        block.nonce,\n    )) != block.hash\n    {\n        warn!(\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìœ íš¨í•˜ì§€ ì•Šì€ í•´ì‹œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\", block.id);\n        return false;\n    }\n    true\n}\n```\n\n# ì²´ì¸ ìœ íš¨ì„± ê²€ì‚¬ (is_chain_valid í•¨ìˆ˜)\n\nis_chain_validëŠ” ì „ì²´ ë¸”ë¡ ì²´ì¸ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤. ë¸”ë¡ì²´ì¸ì´ ì¼ê´€ì ì´ê³  ìœ íš¨í•œ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n\n\n```rust\nfn is_chain_valid(&self, chain: &[Block]) -> bool {\n    for i in 0..chain.len() {\n        if i == 0 {\n            continue;\n        }\n        let first = chain.get(i - 1).expect(\"has to exist\");\n        let second = chain.get(i).expect(\"has to exist\");\n        if !self.is_block_valid(second, first) {\n            return false;\n        }\n    }\n    true\n}\n```\n\n# ì²´ì¸ ì„ íƒ (choose_chain í•¨ìˆ˜)\n\nì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì˜ ì—¬ëŸ¬ ë²„ì „ì´ ì¶©ëŒí•˜ëŠ” ê²½ìš° í•´ê²°í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. í•­ìƒ ê°€ì¥ ê¸´ ìœ íš¨í•œ ì²´ì¸ì„ ì„ íƒí•©ë‹ˆë‹¤.\n\n```rust\n// í•­ìƒ ê°€ì¥ ê¸´ ìœ íš¨í•œ ì²´ì¸ì„ ì„ íƒí•©ë‹ˆë‹¤\nfn choose_chain(&mut self, local: Vec<Block>, remote: Vec<Block>) -> Vec<Block> {\n    let is_local_valid = self.is_chain_valid(&local);\n    let is_remote_valid = self.is_chain_valid(&remote);\n\n    if is_local_valid && is_remote_valid {\n        if local.len() >= remote.len() {\n            local\n        } else {\n            remote\n        }\n    } else if is_remote_valid && !is_local_valid {\n        remote\n    } else if !is_remote_valid && is_local_valid {\n        local\n    } else {\n        panic!(\"ë¡œì»¬ ë° ì›ê²© ì²´ì¸ì´ ëª¨ë‘ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\");\n    }\n}\n```\n\n\n\n# ë©”ì¸ ê¸°ëŠ¥ ë° ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí‚¹\n\nì£¼ìš” ê¸°ëŠ¥ì€ ë¸”ë¡ì²´ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„¤íŠ¸ì›Œí‚¹ ë° ì´ë²¤íŠ¸ ì²˜ë¦¬ ë¶€ë¶„ì„ ì„¤ì •í•©ë‹ˆë‹¤. í† í‚¤ì˜¤(tokio)ì™€ ë¦½íˆ¬í”¼(libp2p) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í”¼ì–´ ê°„ ìƒí˜¸ ì‘ìš©ì„ ê´€ë¦¬í•˜ë©°, ì²´ì¸ ìš”ì²­ ë° ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ì™€ ê°™ì€ ì´ë²¤íŠ¸ì— ì‘ë‹µí•©ë‹ˆë‹¤.\n\n```rust\n#[tokio::main]\nasync fn main() {\n    pretty_env_logger::init();\n\n    info!(\"Peer Id: {}\", blockchain::PEER_ID.clone());\n    let (response_sender, mut response_rcv) = mpsc::unbounded_channel();\n    let (init_sender, mut init_rcv) = mpsc::unbounded_channel();\n\n    let auth_keys = Keypair::<X25519Spec>::new()\n        .into_authentic(&blockchain::KEYS)\n        .expect(\"can create auth keys\");\n\n    let transp = TokioTcpConfig::new()\n        .upgrade(upgrade::Version::V1)\n        .authenticate(NoiseConfig::xx(auth_keys).into_authenticated())\n        .multiplex(mplex::MplexConfig::new())\n        .boxed();\n\n    let behaviour = blockchain::AppBehaviour::new(App::new(), response_sender, init_sender.clone()).await;\n\n    let mut swarm = SwarmBuilder::new(transp, behaviour, *blockchain::PEER_ID)\n        .executor(Box::new(|fut| {\n            spawn(fut);\n        }))\n        .build();\n\n    let mut stdin = BufReader::new(stdin()).lines();\n\n    Swarm::listen_on(\n        &mut swarm,\n        \"/ip4/0.0.0.0/tcp/0\"\n            .parse()\n            .expect(\"can get a local socket\"),\n    )\n        .expect(\"swarm can be started\");\n\n    spawn(async move {\n        sleep(Duration::from_secs(1)).await;\n        info!(\"sending init event\");\n        init_sender.send(true).expect(\"can send init event\");\n    });\n\n    loop {\n        let evt = {\n            select! {\n                line = stdin.next_line() => Some(blockchain::EventType::Input(line.expect(\"can get line\").expect(\"can read line from stdin\"))),\n                response = response_rcv.recv() => {\n                    Some(blockchain::EventType::LocalChainResponse(response.expect(\"response exists\")))\n                },\n                _init = init_rcv.recv() => {\n                    Some(blockchain::EventType::Init)\n                }\n                event = swarm.select_next_some() => {\n                    info!(\"Unhandled Swarm Event: {:?}\", event);\n                    None\n                },\n            }\n        };\n\n        if let Some(event) = evt {\n            match event {\n                blockchain::EventType::Init => {\n                    let peers = blockchain::get_list_peers(&swarm);\n                    swarm.behaviour_mut().app.genesis();\n\n                    info!(\"connected nodes: {}\", peers.len());\n                    if !peers.is_empty() {\n                        let req = blockchain::LocalChainRequest {\n                            from_peer_id: peers\n                                .iter()\n                                .last()\n                                .expect(\"at least one peer\")\n                                .to_string(),\n                        };\n\n                        let json = serde_json::to_string(&req).expect(\"can jsonify request\");\n                        swarm\n                            .behaviour_mut()\n                            .floodsub\n                            .publish(blockchain::CHAIN_TOPIC.clone(), json.as_bytes());\n                    }\n                }\n                blockchain::EventType::LocalChainResponse(resp) => {\n                    let json = serde_json::to_string(&resp).expect(\"can jsonify response\");\n                    swarm\n                        .behaviour_mut()\n                        .floodsub\n                        .publish(blockchain::CHAIN_TOPIC.clone(), json.as_bytes());\n                }\n                blockchain::EventType::Input(line) => match line.as_str() {\n                    \"ls p\" => blockchain::handle_print_peers(&swarm),\n                    cmd if cmd.starts_with(\"ls c\") => blockchain::handle_print_chain(&swarm),\n                    cmd if cmd.starts_with(\"create b\") => blockchain::handle_create_block(cmd, &mut swarm),\n                    _ => error!(\"unknown command\"),\n                },\n            }\n        }\n    }\n}\n```\n\nì™€ìš°, ì´ê²ƒ ì°¸ ë§ì´ë„¤ìš”!\n\n\n\në‚´ GitHub ì €ì¥ì†Œì—ì„œ ì™„ì „í•œ êµ¬í˜„ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”: [ë£¨ìŠ¤í‹°ì²´ì¸](https://github.com/luishsr/rustychain).\n\n## ë¸”ë¡ì²´ì¸ í…ŒìŠ¤íŠ¸\n\nRustë¡œ ì œê³µëœ ë¸”ë¡ì²´ì¸ êµ¬í˜„ì„ ì‚¬ìš©í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ í™˜ê²½ ì„¤ì •, ë…¸ë“œ ì‹œì‘ ë° ìƒí˜¸ ì‘ìš©í•˜ëŠ” ì¼ë ¨ì˜ ë‹¨ê³„ë¥¼ ë”°ë¼ì•¼ í•´ìš”. ì‹œì‘í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ë¹ ë¥¸ ê°€ì´ë“œë¥¼ ì œê³µí• ê²Œìš”:\n\n## ë‹¨ì¼ ë…¸ë“œ ì‹¤í–‰\n\n\n\n- **ì»´íŒŒì¼ ë° ì‹¤í–‰**: Rust ë¸”ë¡ì²´ì¸ ì½”ë“œê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ í›„ cargo buildë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì»´íŒŒì¼ì´ ì™„ë£Œë˜ë©´ cargo runì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\n- **ì´ˆê¸° í…ŒìŠ¤íŠ¸**: ì²˜ìŒì—ëŠ” ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì´ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ê³  ë…¸ë“œê°€ ì œëŒ€ë¡œ ì‹œì‘ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¨ì¼ ë…¸ë“œë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ë§Œì•½ êµ¬í˜„ë˜ì–´ ìˆë‹¤ë©´ í˜„ì¬ ì²´ì¸ì´ë‚˜ ë…¸ë“œ ìƒíƒœë¥¼ í‘œì‹œí•˜ëŠ” ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì—¬ëŸ¬ ë…¸ë“œ ì‹¤í–‰í•˜ê¸°\n\nì‹¤ì œ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ë ¤ë©´ ì—¬ëŸ¬ ë…¸ë“œë¥¼ ë™ì‹œì— ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n- **ì—¬ëŸ¬ í„°ë¯¸ë„ ì—´ê¸°**: ì—¬ëŸ¬ í„°ë¯¸ë„ ì°½ ë˜ëŠ” íƒ­ì„ì—´ì–´ì£¼ì„¸ìš”. ê°ê°ì€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ë³„ê°œì˜ ë…¸ë“œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n- **ë…ë¦½ì ìœ¼ë¡œ ë…¸ë“œ ì‹¤í–‰**: ê° í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ê³  cargo runì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë³„ê°œ ë…¸ë“œë¡œ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.\n\n\n\n# ë…¸ë“œì™€ ìƒí˜¸ì‘ìš©í•˜ê¸°\n\në¸”ë¡ì²´ì¸ì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë…¸ë“œì™€ ìƒí˜¸ì‘ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\n- ìƒˆ ë¸”ë¡ ìƒì„±: êµ¬í˜„ëœ ëª…ë ¹ì–´(ì˜ˆ: `data`ë¥¼ ì´ìš©í•œ `create b`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•˜ì„¸ìš”. ì´ëŠ” ë¸”ë¡ì²´ì¸ì— ê±°ë˜ë‚˜ ë°ì´í„° ì¶”ê°€ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•  ê²ƒì…ë‹ˆë‹¤.\n- ë¸”ë¡ ì „íŒŒ: í•œ ë…¸ë“œì—ì„œ ìƒˆ ë¸”ë¡ì´ ìƒì„±ë˜ë©´ ì´ ë¸”ë¡ì„ ë‹¤ë¥¸ ë…¸ë“œì— ì „íŒŒí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë…¸ë“œê°€ ì´ ìƒˆ ë¸”ë¡ì„ ìˆ˜ì‹ í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ì—¬ ìì‹ ì˜ ë¸”ë¡ì²´ì¸ ë²„ì „ì— ì¶”ê°€í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n- ë¸”ë¡ì²´ì¸ ìƒíƒœ ë³´ê¸°: ì •ê¸°ì ìœ¼ë¡œ ê° ë…¸ë“œì˜ ë¸”ë¡ì²´ì¸ í˜„ì¬ ìƒíƒœë¥¼ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. ë…¸ë“œ ê°„ì— ì¼ê´€ì„±ì´ ìˆì–´ì•¼í•˜ë©° ìµœì‹  ìœ íš¨ ë¸”ë¡ì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n- ì²´ì¸ ì¶©ëŒ í…ŒìŠ¤íŠ¸: ì„œë¡œ ë‹¤ë¥¸ ë…¸ë“œì—ì„œ ë™ì‹œì— ë‹¤ë¥¸ ë¸”ë¡ì„ ìƒì„±í•˜ì—¬ ì²´ì¸ ì¶©ëŒì„ ì‹œë®¬ë ˆì´íŠ¸í•˜ì„¸ìš”. êµ¬í˜„ì´ ì´ëŸ¬í•œ ì¶©ëŒì„ í•´ê²°í•˜ëŠ” ë°©ì‹(ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ê¸´ ìœ íš¨ ì²´ì¸ì„ ì„ íƒí•¨)ì„ ê´€ì°°í•˜ì„¸ìš”.\n\n# ğŸš€ ë£¨ì´ìŠ¤ ì†Œì•„ë ˆìŠ¤ì— ì˜í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë° ê¸°íƒ€ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ íƒìƒ‰í•˜ê¸°\n\n\n\nğŸ“š í•™ìŠµ í”Œë«í¼: ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ, í´ë¼ìš°ë“œ ì»´í“¨íŒ…, ì‚¬ì´ë²„ ë³´ì•ˆ, ë¸”ë¡ì²´ì¸, ë¦¬ëˆ…ìŠ¤ ë“± ë‹¤ì–‘í•œ ê¸°ìˆ  ë¶„ì•¼ì—ì„œ ì§€ì‹ì„ ë„“íˆì„¸ìš”. ì €ì˜ í¬ê´„ì ì¸ ìë£Œ ëª¨ìŒì„ í†µí•´:\n\n- GitHub ë¦¬í¬ì§€í† ë¦¬ì™€ í•¨ê»˜ í•˜ëŠ” ì‹¤ìŠµ íŠœí† ë¦¬ì–¼: ì „ìš© GitHub ë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ë‹¨ê³„ë³„ ì‹¤ìŠµì„ í†µí•´ ë‹¤ì–‘í•œ ê¸°ìˆ ì„ ì‹¤ìš©ì ìœ¼ë¡œ ìµí ìˆ˜ ìˆìŠµë‹ˆë‹¤. [íŠœí† ë¦¬ì–¼ ì ‘ê·¼í•˜ê¸°](ë§í¬)\n- ì‹¬ì¸µ ì•ˆë‚´ì„œ ë° ê¸°ì‚¬: ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ, í´ë¼ìš°ë“œ ì»´í“¨íŒ… ë“±ì˜ í•µì‹¬ ê°œë…ì„ ìì„¸íˆ ë‹¤ë£¬ ì•ˆë‚´ì„œì™€ ì‹¤ì œ ì˜ˆì œê°€ í’ë¶€í•œ ê¸°ì‚¬ë¡œ ê¹Šê²Œ íŒŒë³´ì„¸ìš”. [ë” ì½ê¸°](ë§í¬)\n- ì „ìì±… ëª¨ìŒì§‘: \"ëŸ¬ìŠ¤íŠ¸ ì†Œìœ ê¶Œ ë§ˆìŠ¤í„°í•˜ê¸°\" ë° \"ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ ì•ˆë‚´ì„œ\"ì™€ ê°™ì€ ì œëª©ì„ í¬í•¨í•œ ë¬´ë£Œ ì „ìì±… ì‹œë¦¬ì¦ˆë¡œ ë‹¤ì–‘í•œ ê¸°ìˆ  ë¶„ì•¼ì˜ ì´í•´ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”. [ì „ìì±… ë‹¤ìš´ë¡œë“œ](ë§í¬)\n- í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤: API ê²Œì´íŠ¸ì›¨ì´, ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬, ì‚¬ì´ë²„ ë³´ì•ˆ ë„êµ¬, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë“±ê³¼ ê°™ì´ ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì™„ì „ ê¸°ëŠ¥ í”„ë¡œì íŠ¸ë¥¼ ë°œê²¬í•˜ì„¸ìš”. [í”„ë¡œì íŠ¸ ë³´ê¸°](ë§í¬)\n- LinkedIn ë‰´ìŠ¤ë ˆí„°: LinkedInì—ì„œ ì œ ë‰´ìŠ¤ë ˆí„°ë¥¼ êµ¬ë…í•˜ì—¬ ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë° ì‹ í¥ ê¸°ìˆ ì— ê´€í•œ ê·œì¹™ì ì¸ ì—…ë°ì´íŠ¸ì™€ í†µì°°ë ¥ì„ ìœ ì§€í•˜ì„¸ìš”. [ì—¬ê¸°ì„œ êµ¬ë…í•˜ê¸°](ë§í¬)\n\nğŸ”— ì €ì™€ ì—°ê²°í•´ë³´ì„¸ìš”:\n\n- Medium: ë¯¸ë””ì—„ì—ì„œ ì œ ê¸€ì„ ì½ê³  ìœ ìš©í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë°•ìˆ˜ë¥¼ ë³´ë‚´ì£¼ì„¸ìš”. ì´ëŠ” ì €ì—ê²Œ ê¸€ì“°ê¸°ì™€ ëŸ¬ìŠ¤íŠ¸ ì½˜í…ì¸  ê³µìœ ë¥¼ ê³„ì† ì´ëŒì–´ì£¼ëŠ” ì›ë™ë ¥ì´ ë©ë‹ˆë‹¤. [Medium íŒ”ë¡œìš°í•˜ê¸°](ë§í¬)\n- ê°œì¸ ë¸”ë¡œê·¸: ì œ ê°œì¸ ë¸”ë¡œê·¸ì—ì„œ ë” ë§ì€ ëŸ¬ìŠ¤íŠ¸ ê´€ë ¨ ì½˜í…ì¸ ë¥¼ í™•ì¸í•˜ì„¸ìš”. [ë¸”ë¡œê·¸ ë°©ë¬¸í•˜ê¸°](ë§í¬)\n- LinkedIn: ë” ë§ì€ í†µì°°ë ¥ ìˆëŠ” í† ë¡ ê³¼ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì œ ì „ë¬¸ ë„¤íŠ¸ì›Œí¬ì— ì°¸ì—¬í•˜ì„¸ìš”. [LinkedIn ì—°ê²°í•˜ê¸°](ë§í¬)\n- íŠ¸ìœ„í„°: ë¹ ë¥¸ ì—…ë°ì´íŠ¸ì™€ ëŸ¬ìŠ¤íŠ¸ í”„ë¡œê·¸ë˜ë°ì— ëŒ€í•œ ìƒê°ì„ ë³´ë ¤ë©´ íŠ¸ìœ„í„°ì—ì„œ ì €ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”. [íŠ¸ìœ„í„°ì—ì„œ íŒ”ë¡œìš°í•˜ê¸°](ë§í¬)\n\n\n\nWassup, folks? Feel free to leave a comment or shoot me a message!\n\nCheers,\n\nLuis Soares\n[luis.soares@linux.com](mailto:luis.soares@linux.com)\n\nSenior Software Engineer | Cloud Engineer | SRE | Tech Lead | Rust | Golang | Java | ML AI & Statistics | Web3 & Blockchain","ogImage":{"url":"/assets/img/2024-05-05-ImplementingaBlockchaininRust_0.png"},"coverImage":"/assets/img/2024-05-05-ImplementingaBlockchaininRust_0.png","tag":["Tech"],"readingTime":23},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-05-05-ImplementingaBlockchaininRust_0.png\" alt=\"Implementing a Blockchain in Rust\"></p>\n<p>ì•ˆë…•í•˜ì„¸ìš”! ì´ ê¸°ì‚¬ëŠ” Rustì—ì„œ ê¸°ë³¸ì ì¸ ë¸”ë¡ì²´ì¸ì„ êµ¬í˜„í•˜ëŠ” ë‹¨ê³„ë³„ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë¸”ë¡ êµ¬ì¡°ì˜ ì´ˆê¸° ì„¤ì •ë¶€í„° ì‹œì‘í•˜ì—¬ ê³ ìœ  ì‹ë³„ìì™€ ì•”í˜¸ í•´ì‹œë¥¼ í¬í•¨í•˜ê³ , ë¸”ë¡ ìƒì„±, ì±„êµ´, ê·¸ë¦¬ê³  ìœ íš¨ì„± ê²€ì‚¬ë¡œ ê·¸ ê¸°ì´ˆë¥¼ ë§ˆë ¨í•©ë‹ˆë‹¤. ê° í•¨ìˆ˜ì˜ ë°‘ë°”íƒ•ê³¼ ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•˜ì—¬ ì‘ì—… ì¦ëª…, ë…¼ìŠ¤ ê³„ì‚°, ë¸”ë¡ì²´ì¸ì˜ ë¬´ê²°ì„±ê³¼ ì—°ì†ì„±ì„ ìœ ì§€í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì— ëŒ€í•œ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤.</p>\n<p>ì°¸ê³ : ì´ëŠ” í•™ìŠµ ëª©ì ì„ ìœ„í•œ ë² ì–´ë³¸ê³¼ ê¸°ë³¸ ë¸”ë¡ì²´ì¸ êµ¬í˜„ì´ë©° í”„ë¡œë•ì…˜ í™˜ê²½ì—ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤! :)</p>\n<p>ì, í•¨ê»˜ Rustaceans ì—¬ëŸ¬ë¶„, ë°”ë¡œ ë“¤ì–´ê°€ ë´…ì‹œë‹¤!</p>\n<h1>ê¸°ë³¸ ì‚¬í•­</h1>\n<p>ë¸”ë¡ì²´ì¸ì˜ P2P ë„¤íŠ¸ì›Œí¬ ìƒí˜¸ì‘ìš© ì²˜ë¦¬ì—ì„œ í•µì‹¬ ê°œë…ê³¼ ì£¼ìš” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<h2>ë…¸ë“œì™€ í”¼ì–´ ì°¾ê¸°</h2>\n<ul>\n<li>ë…¸ë“œ ì‹ë³„: ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ê° ë…¸ë“œëŠ” ì•”í˜¸í™” í‚¤ ìŒì—ì„œ íŒŒìƒëœ ê³ ìœ  ì‹ë³„ìë¥¼ ê°–ìŠµë‹ˆë‹¤.</li>\n<li>í”¼ì–´ ì°¾ê¸°: ë…¸ë“œëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ í˜•ì„±í•˜ê¸° ìœ„í•´ ì„œë¡œë¥¼ ë°œê²¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë¦¬ ì •ì˜ëœ í”¼ì–´(ì •ì  êµ¬ì„±), DNS ê¸°ë°˜ ë°œê²¬, ë˜ëŠ” ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ë°œê²¬ì„ ìœ„í•´ mDNSì™€ ê°™ì€ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ë“±, ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì´ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ë¶€íŠ¸ìŠ¤íŠ¸ë© ë…¸ë“œ: ìƒˆë¡œìš´ ë…¸ë“œëŠ” ì¢…ì¢… ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì•Œë ¤ì§„ ë…¸ë“œ(ë¶€íŠ¸ìŠ¤íŠ¸ë© ë…¸ë“œ)ì— ì—°ê²°í•˜ì—¬ ë¹ ë¥´ê²Œ ë„¤íŠ¸ì›Œí¬ì— í†µí•©ë©ë‹ˆë‹¤.</li>\n</ul>\n<h2>ë„¤íŠ¸ì›Œí¬ í”„ë¡œí† ì½œ</h2>\n<ul>\n<li>í”„ë¡œí† ì½œ ìŠ¤íƒ: ë¸”ë¡ì²´ì¸ P2P ë„¤íŠ¸ì›Œí¬ëŠ” íŠ¹ì • í”„ë¡œí† ì½œ ìŠ¤íƒì„ ì‚¬ìš©í•˜ì—¬ í†µì‹ í•©ë‹ˆë‹¤. ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” í”„ë¡œí† ì½œë¡œëŠ” ê¸°ë³¸ ì „ì†¡ì„ ìœ„í•œ TCP/IPì™€ ì•ˆì „í•œ í†µì‹ ì„ ìœ„í•œ ì•”í˜¸ í”„ë¡œí† ì½œ(ì˜ˆ: TLS ë˜ëŠ” Noise)ì´ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ë©”ì‹œì§• í”„ë¡œí† ì½œ: Floodsubì´ë‚˜ Gossipsubê³¼ ê°™ì€ í”„ë¡œí† ì½œì€ ë©”ì‹œì§€ ë°©ì†¡ ë° ë„¤íŠ¸ì›Œí¬ ì „íŒŒë¥¼ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</li>\n</ul>\n<h2>ë°ì´í„° ì „íŒŒ ë° ë™ê¸°í™”</h2>\n<ul>\n<li>ë°©ì†¡: ë…¸ë“œëŠ” íŠ¸ëœì­ì…˜ ë° ìƒˆë¡­ê²Œ ì±„êµ´ëœ ë¸”ë¡ì„ ë„¤íŠ¸ì›Œí¬ë¡œ ë°©ì†¡í•˜ì—¬ ëª¨ë“  ì°¸ê°€ìê°€ ìµœì‹  ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•˜ë„ë¡í•©ë‹ˆë‹¤.</li>\n<li>ì²´ì¸ ë™ê¸°í™”: ë…¸ë“œëŠ” ë¸”ë¡ì²´ì¸ ë³µì‚¬ë³¸ì„ ê°€ì¥ ê¸´ ì²´ì¸(ì¼ë°˜ì ìœ¼ë¡œ ìœ íš¨í•œ ê²ƒìœ¼ë¡œ ì¸ì •ë¨)ì— ë™ê¸°í™”í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.</li>\n<li>í•©ì˜ ë©”ì»¤ë‹ˆì¦˜: í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì¸ ì‘ì—… ì¦ëª…(PoW) ë˜ëŠ” ì§€ë¶„ ì¦ëª…(PoS) ë“±ì´ ìƒˆë¡œìš´ ë¸”ë¡ì„ ê²€ì¦í•˜ê³  ì¶”ê°€í•˜ê¸°ìœ„í•´ íŠ¹íˆ ë¸”ë¡ì²´ì¸ì˜ ìƒíƒœì— ëŒ€í•œ í•©ì˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</li>\n</ul>\n<p>ì´ëŸ¬í•œ í•µì‹¬ ê°œë…ì„ ì´í•´í–ˆë‹¤ë©´, ì´ì œ ì½”ë“œë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤!</p>\n<h1>cargo.toml â€” ë‹¤ìŒ ì¢…ì†ì„±ì„ ì¶”ê°€í•˜ì„¸ìš”</h1>\n<pre><code class=\"hljs language-toml\"><span class=\"hljs-section\">[dependencies]</span>\n<span class=\"hljs-attr\">chrono</span> = <span class=\"hljs-string\">\"0.4\"</span>\n<span class=\"hljs-attr\">sha2</span> = <span class=\"hljs-string\">\"0.9.8\"</span>\n<span class=\"hljs-attr\">serde</span> = { version = <span class=\"hljs-string\">\"1.0\"</span>, features = [<span class=\"hljs-string\">\"derive\"</span>] }\n<span class=\"hljs-attr\">serde_json</span> = <span class=\"hljs-string\">\"1.0\"</span>\n<span class=\"hljs-attr\">libp2p</span> = { version = <span class=\"hljs-string\">\"0.40.0\"</span>, features = [<span class=\"hljs-string\">\"tcp-tokio\"</span>, <span class=\"hljs-string\">\"mdns\"</span>] }\n<span class=\"hljs-attr\">tokio</span> = { version = <span class=\"hljs-string\">\"1.0\"</span>, features = [<span class=\"hljs-string\">\"io-util\"</span>, <span class=\"hljs-string\">\"io-std\"</span>, <span class=\"hljs-string\">\"macros\"</span>, <span class=\"hljs-string\">\"rt\"</span>, <span class=\"hljs-string\">\"rt-multi-thread\"</span>, <span class=\"hljs-string\">\"sync\"</span>, <span class=\"hljs-string\">\"time\"</span>] }\n<span class=\"hljs-attr\">hex</span> = <span class=\"hljs-string\">\"0.4\"</span>\n<span class=\"hljs-attr\">once_cell</span> = <span class=\"hljs-string\">\"1.5\"</span>\n<span class=\"hljs-attr\">log</span> = <span class=\"hljs-string\">\"0.4\"</span>\n<span class=\"hljs-attr\">pretty_env_logger</span> = <span class=\"hljs-string\">\"0.4\"</span>\n</code></pre>\n<p>ìš°ë¦¬ëŠ” ë§ì€ ì‹œê°„ì„ ì¡ì•„ë¨¹ì§€ ì•Šë„ë¡ ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šê² ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ P2P êµ¬í˜„ì— ì¤‘ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œì¨ libp2pë¥¼ ì–¸ê¸‰í•´ ë´…ë‹ˆë‹¤.</p>\n<p>ì €ëŠ” libp2pì— ëŒ€í•´ ìì„¸í•œ ê¸°ì‚¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ í’ë¶€í•œ Rust í¬ë ˆì´íŠ¸ì— ìµìˆ™í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2>blockchain.rs â€” ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° P2P í†µì‹ </h2>\n<p>ìš°ë¦¬ê°€ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° p2p ë°©ë²•ì„ êµ¬í˜„í•  'blockchain.rs'ë¼ëŠ” ìƒˆ íŒŒì¼ì„ ë§Œë“¤ì–´ë´…ì‹œë‹¤.</p>\n<h3>ê¸°ë³¸ ì„¤ì •</h3>\n<ul>\n<li>KEYS, PEER_ID, CHAIN_TOPIC, BLOCK_TOPIC: ì´ëŸ¬í•œ ì •ì  ë³€ìˆ˜ëŠ” ì‹ ì›ì„ ìœ„í•œ ì•”í˜¸í™” í‚¤, ë„¤íŠ¸ì›Œí¬ ë…¸ë“œë¥¼ ìœ„í•œ í”¼ì–´ ID, ê·¸ë¦¬ê³  Floodsub í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì²´ì¸ ë° ë¸”ë¡ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì£¼ì œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> super::{App, Block};\n<span class=\"hljs-keyword\">use</span> libp2p::{\n    floodsub::{Floodsub, FloodsubEvent, Topic},\n    identity,\n    mdns::{Mdns, MdnsEvent},\n    swarm::{NetworkBehaviourEventProcess, Swarm},\n    NetworkBehaviour, PeerId,\n};\n<span class=\"hljs-keyword\">use</span> log::{error, info};\n<span class=\"hljs-keyword\">use</span> once_cell::sync::Lazy;\n<span class=\"hljs-keyword\">use</span> serde::{Deserialize, Serialize};\n<span class=\"hljs-keyword\">use</span> std::collections::HashSet;\n<span class=\"hljs-keyword\">use</span> tokio::sync::mpsc;\n\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">static</span> KEYS: Lazy&#x3C;identity::Keypair> = Lazy::<span class=\"hljs-title function_ invoke__\">new</span>(identity::Keypair::generate_ed25519);\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">static</span> PEER_ID: Lazy&#x3C;PeerId> = Lazy::<span class=\"hljs-title function_ invoke__\">new</span>(|| PeerId::<span class=\"hljs-title function_ invoke__\">from</span>(KEYS.<span class=\"hljs-title function_ invoke__\">public</span>()));\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">static</span> CHAIN_TOPIC: Lazy&#x3C;Topic> = Lazy::<span class=\"hljs-title function_ invoke__\">new</span>(|| Topic::<span class=\"hljs-title function_ invoke__\">new</span>(<span class=\"hljs-string\">\"chains\"</span>));\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">static</span> BLOCK_TOPIC: Lazy&#x3C;Topic> = Lazy::<span class=\"hljs-title function_ invoke__\">new</span>(|| Topic::<span class=\"hljs-title function_ invoke__\">new</span>(<span class=\"hljs-string\">\"blocks\"</span>));\n</code></pre>\n<h1>ì´ë²¤íŠ¸ ìœ í˜•</h1>\n<ul>\n<li>ChainResponse, LocalChainRequest, EventType: ì´ëŸ¬í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ë…¸ë“œê°€ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ ë° ë©”ì‹œì§€ ìœ í˜•ì„ ì •ì˜í•©ë‹ˆë‹¤. ChainResponse ë° LocalChainRequestëŠ” ì²´ì¸ ìš”ì²­ì— ì‘ë‹µí•˜ê³  ë¡œì»¬ ì²´ì¸ ìƒíƒœë¥¼ ìš”ì²­í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-meta\">#[derive(Debug, Serialize, Deserialize)]</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">ChainResponse</span> {\n    <span class=\"hljs-keyword\">pub</span> blocks: <span class=\"hljs-type\">Vec</span>&#x3C;Block>,\n    <span class=\"hljs-keyword\">pub</span> receiver: <span class=\"hljs-type\">String</span>,\n}\n\n<span class=\"hljs-meta\">#[derive(Debug, Serialize, Deserialize)]</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">LocalChainRequest</span> {\n    <span class=\"hljs-keyword\">pub</span> from_peer_id: <span class=\"hljs-type\">String</span>,\n}\n\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">EventType</span> {\n    <span class=\"hljs-title function_ invoke__\">LocalChainResponse</span>(ChainResponse),\n    <span class=\"hljs-title function_ invoke__\">Input</span>(<span class=\"hljs-type\">String</span>),\n    Init,\n}\n</code></pre>\n<h2>AppBehaviour</h2>\n<ul>\n<li>NetworkBehaviour Implementation (AppBehaviour): This struct implements the NetworkBehaviour trait, combining different behaviours like Floodsub (for pub/sub messaging) and mDNS (for local network peer discovery). It also holds channels for sending responses and initializing events and an instance of the App struct which contains the blockchain logic.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-meta\">#[derive(NetworkBehaviour)]</span>\n<span class=\"hljs-meta\">#[behaviour(out_event=<span class=\"hljs-string\">\"Event\"</span>)]</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">AppBehaviour</span> {\n    <span class=\"hljs-keyword\">pub</span> floodsub: Floodsub,\n    <span class=\"hljs-keyword\">pub</span> mdns: Mdns,\n    <span class=\"hljs-meta\">#[behaviour(ignore)]</span>\n    <span class=\"hljs-keyword\">pub</span> response_sender: mpsc::UnboundedSender&#x3C;ChainResponse>,\n    <span class=\"hljs-meta\">#[behaviour(ignore)]</span>\n    <span class=\"hljs-keyword\">pub</span> init_sender: mpsc::UnboundedSender&#x3C;<span class=\"hljs-type\">bool</span>>,\n    <span class=\"hljs-meta\">#[behaviour(ignore)]</span>\n    <span class=\"hljs-keyword\">pub</span> app: App,\n}\n\n<span class=\"hljs-meta\">#[derive(Debug)]</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">enum</span> <span class=\"hljs-title class_\">Event</span> {\n    <span class=\"hljs-title function_ invoke__\">ChainResponse</span>(ChainResponse),\n    <span class=\"hljs-title function_ invoke__\">Floodsub</span>(FloodsubEvent),\n    <span class=\"hljs-title function_ invoke__\">Mdns</span>(MdnsEvent),\n    <span class=\"hljs-title function_ invoke__\">Input</span>(<span class=\"hljs-type\">String</span>),\n    Init,\n}\n\n<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">From</span>&#x3C;FloodsubEvent> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Event</span> {\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">from</span>(event: FloodsubEvent) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-keyword\">Self</span> {\n        <span class=\"hljs-keyword\">Self</span>::<span class=\"hljs-title function_ invoke__\">Floodsub</span>(event)\n    }\n}\n\n<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">From</span>&#x3C;MdnsEvent> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">Event</span> {\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">from</span>(event: MdnsEvent) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-keyword\">Self</span> {\n        <span class=\"hljs-keyword\">Self</span>::<span class=\"hljs-title function_ invoke__\">Mdns</span>(event)\n    }\n}\n\n<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">AppBehaviour</span> {\n    <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>(\n        app: App,\n        response_sender: mpsc::UnboundedSender&#x3C;ChainResponse>,\n        init_sender: mpsc::UnboundedSender&#x3C;<span class=\"hljs-type\">bool</span>>,\n    ) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-keyword\">Self</span> {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">behaviour</span> = <span class=\"hljs-keyword\">Self</span> {\n            app,\n            floodsub: Floodsub::<span class=\"hljs-title function_ invoke__\">new</span>(*PEER_ID),\n            mdns: Mdns::<span class=\"hljs-title function_ invoke__\">new</span>(<span class=\"hljs-built_in\">Default</span>::<span class=\"hljs-title function_ invoke__\">default</span>())\n                .<span class=\"hljs-keyword\">await</span>\n                .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can create mdns\"</span>),\n            response_sender,\n            init_sender,\n        };\n\n        behaviour.floodsub.<span class=\"hljs-title function_ invoke__\">subscribe</span>(CHAIN_TOPIC.<span class=\"hljs-title function_ invoke__\">clone</span>());\n        behaviour.floodsub.<span class=\"hljs-title function_ invoke__\">subscribe</span>(BLOCK_TOPIC.<span class=\"hljs-title function_ invoke__\">clone</span>());\n\n        behaviour\n    }\n}\n</code></pre>\n<h1>ì´ë²¤íŠ¸ ì²˜ë¦¬</h1>\n<ul>\n<li>FloodsubEvent ë° MdnsEventë¥¼ ìœ„í•œ NetworkBehaviourEventProcess: ì´ëŸ¬í•œ êµ¬í˜„ì€ ì‘ìš© í”„ë¡œê·¸ë¨ì´ ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.</li>\n<li>Floodsub ì´ë²¤íŠ¸: ìƒˆ ë¸”ë¡, ì²´ì¸ ì‘ë‹µ ë˜ëŠ” ë¡œì»¬ ì²´ì¸ ìš”ì²­ê³¼ ê°™ì€ ë¸”ë¡ì²´ì¸ ê´€ë ¨ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìƒˆ ë¸”ë¡ì´ ìˆ˜ì‹ ë˜ë©´ try_add_blockì„ í†µí•´ ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.</li>\n<li>mDNS ì´ë²¤íŠ¸: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì—ì„œ ìƒˆ í”¼ì–´ì˜ ë°œê²¬ ë˜ëŠ” ê¸°ì¡´ í”¼ì–´ì˜ ì†ì‹¤ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” Floodsub í”„ë¡œí† ì½œì—ì„œ í”¼ì–´ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-comment\">// ìˆ˜ì‹  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬</span>\n<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">NetworkBehaviourEventProcess</span>&#x3C;FloodsubEvent> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">AppBehaviour</span> {\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">inject_event</span>(&#x26;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, event: FloodsubEvent) {\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">FloodsubEvent</span>::<span class=\"hljs-title function_ invoke__\">Message</span>(msg) = event {\n            <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Ok</span>(resp) = serde_json::from_slice::&#x3C;ChainResponse>(&#x26;msg.data) {\n                <span class=\"hljs-keyword\">if</span> resp.receiver == PEER_ID.<span class=\"hljs-title function_ invoke__\">to_string</span>() {\n                    info!(<span class=\"hljs-string\">\"{}ë¡œë¶€í„° ì‘ë‹µ:\"</span>, msg.source);\n                    resp.blocks.<span class=\"hljs-title function_ invoke__\">iter</span>().<span class=\"hljs-title function_ invoke__\">for_each</span>(|r| info!(<span class=\"hljs-string\">\"{:?}\"</span>, r));\n\n                    <span class=\"hljs-keyword\">self</span>.app.blocks = <span class=\"hljs-keyword\">self</span>.app.<span class=\"hljs-title function_ invoke__\">choose_chain</span>(<span class=\"hljs-keyword\">self</span>.app.blocks.<span class=\"hljs-title function_ invoke__\">clone</span>(), resp.blocks);\n                }\n            } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Ok</span>(resp) = serde_json::from_slice::&#x3C;LocalChainRequest>(&#x26;msg.data) {\n                info!(<span class=\"hljs-string\">\"{}ë¡œë¶€í„° ë¡œì»¬ ì²´ì¸ ì „ì†¡\"</span>, msg.source.<span class=\"hljs-title function_ invoke__\">to_string</span>());\n                <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">peer_id</span> = resp.from_peer_id;\n                <span class=\"hljs-keyword\">if</span> PEER_ID.<span class=\"hljs-title function_ invoke__\">to_string</span>() == peer_id {\n                    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Err</span>(e) = <span class=\"hljs-keyword\">self</span>.response_sender.<span class=\"hljs-title function_ invoke__\">send</span>(ChainResponse {\n                        blocks: <span class=\"hljs-keyword\">self</span>.app.blocks.<span class=\"hljs-title function_ invoke__\">clone</span>(),\n                        receiver: msg.source.<span class=\"hljs-title function_ invoke__\">to_string</span>(),\n                    }) {\n                        error!(<span class=\"hljs-string\">\"ì±„ë„ì„ í†µí•´ ì‘ë‹µ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ, {}\"</span>, e);\n                    }\n                }\n            } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Ok</span>(block) = serde_json::from_slice::&#x3C;Block>(&#x26;msg.data) {\n                info!(<span class=\"hljs-string\">\"{}ë¡œë¶€í„° ìƒˆ ë¸”ë¡ ìˆ˜ì‹ \"</span>, msg.source.<span class=\"hljs-title function_ invoke__\">to_string</span>());\n                <span class=\"hljs-keyword\">self</span>.app.<span class=\"hljs-title function_ invoke__\">try_add_block</span>(block);\n            }\n        }\n    }\n}\n\n<span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">NetworkBehaviourEventProcess</span>&#x3C;MdnsEvent> <span class=\"hljs-keyword\">for</span> <span class=\"hljs-title class_\">AppBehaviour</span> {\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">inject_event</span>(&#x26;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, event: MdnsEvent) {\n        <span class=\"hljs-keyword\">match</span> event {\n            MdnsEvent::<span class=\"hljs-title function_ invoke__\">Discovered</span>(discovered_list) => {\n                <span class=\"hljs-title function_ invoke__\">for</span> (peer, _addr) <span class=\"hljs-keyword\">in</span> discovered_list {\n                    <span class=\"hljs-keyword\">self</span>.floodsub.<span class=\"hljs-title function_ invoke__\">add_node_to_partial_view</span>(peer);\n                }\n            }\n            MdnsEvent::<span class=\"hljs-title function_ invoke__\">Expired</span>(expired_list) => {\n                <span class=\"hljs-title function_ invoke__\">for</span> (peer, _addr) <span class=\"hljs-keyword\">in</span> expired_list {\n                    <span class=\"hljs-keyword\">if</span> !<span class=\"hljs-keyword\">self</span>.mdns.<span class=\"hljs-title function_ invoke__\">has_node</span>(&#x26;peer) {\n                        <span class=\"hljs-keyword\">self</span>.floodsub.<span class=\"hljs-title function_ invoke__\">remove_node_from_partial_view</span>(&#x26;peer);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h1>ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜</h1>\n<ul>\n<li>get_list_peers: ë„¤íŠ¸ì›Œí¬ì—ì„œ ë°œê²¬ëœ í”¼ì–´ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.</li>\n<li>handle_print_peers: ì½˜ì†”ì— í”¼ì–´ ëª©ë¡ì„ ë¡œê¹…í•©ë‹ˆë‹¤.</li>\n<li>handle_print_chain: ë¡œì»¬ ë¸”ë¡ì²´ì¸ ìƒíƒœë¥¼ ê¸°ë¡í•˜ë©°, ë¸”ë¡ì²´ì¸ì˜ ì‹œê°ì  í‘œí˜„ì„ ì œê³µí•©ë‹ˆë‹¤.</li>\n<li>handle_create_block: ì‚¬ìš©ì ì…ë ¥ì„ ì²˜ë¦¬í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤. ì œê³µëœ ë°ì´í„°ë¡œ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•˜ê³ , ë¡œì»¬ ë¸”ë¡ì²´ì¸ì„ ì—…ë°ì´íŠ¸í•˜ê³ , Floodsubì„ ì‚¬ìš©í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ í”¼ì–´ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸í•©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">get_list_peers</span>(swarm: &#x26;Swarm&#x3C;AppBehaviour>) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">Vec</span>&#x3C;<span class=\"hljs-type\">String</span>> {\n    info!(<span class=\"hljs-string\">\"ë°œê²¬ëœ í”¼ì–´:\"</span>);\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">nodes</span> = swarm.<span class=\"hljs-title function_ invoke__\">behaviour</span>().mdns.<span class=\"hljs-title function_ invoke__\">discovered_nodes</span>();\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">unique_peers</span> = HashSet::<span class=\"hljs-title function_ invoke__\">new</span>();\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">peer</span> <span class=\"hljs-keyword\">in</span> nodes {\n        unique_peers.<span class=\"hljs-title function_ invoke__\">insert</span>(peer);\n    }\n    unique_peers.<span class=\"hljs-title function_ invoke__\">iter</span>().<span class=\"hljs-title function_ invoke__\">map</span>(|p| p.<span class=\"hljs-title function_ invoke__\">to_string</span>()).<span class=\"hljs-title function_ invoke__\">collect</span>()\n}\n\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">handle_print_peers</span>(swarm: &#x26;Swarm&#x3C;AppBehaviour>) {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">peers</span> = <span class=\"hljs-title function_ invoke__\">get_list_peers</span>(swarm);\n    peers.<span class=\"hljs-title function_ invoke__\">iter</span>().<span class=\"hljs-title function_ invoke__\">for_each</span>(|p| info!(<span class=\"hljs-string\">\"{}\"</span>, p));\n}\n\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">handle_print_chain</span>(swarm: &#x26;Swarm&#x3C;AppBehaviour>) {\n    info!(<span class=\"hljs-string\">\"ë¡œì»¬ ë¸”ë¡ì²´ì¸:\"</span>);\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">pretty_json</span> =\n        serde_json::<span class=\"hljs-title function_ invoke__\">to_string_pretty</span>(&#x26;swarm.<span class=\"hljs-title function_ invoke__\">behaviour</span>().app.blocks).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can jsonify blocks\"</span>);\n    info!(<span class=\"hljs-string\">\"{}\"</span>, pretty_json);\n}\n\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">handle_create_block</span>(cmd: &#x26;<span class=\"hljs-type\">str</span>, swarm: &#x26;<span class=\"hljs-keyword\">mut</span> Swarm&#x3C;AppBehaviour>) {\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(data) = cmd.<span class=\"hljs-title function_ invoke__\">strip_prefix</span>(<span class=\"hljs-string\">\"create b\"</span>) {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">behaviour</span> = swarm.<span class=\"hljs-title function_ invoke__\">behaviour_mut</span>();\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">latest_block</span> = behaviour\n            .app\n            .blocks\n            .<span class=\"hljs-title function_ invoke__\">last</span>()\n            .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"ì ì–´ë„ í•˜ë‚˜ì˜ ë¸”ë¡ì´ ìˆì–´ì•¼ í•¨\"</span>);\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">block</span> = Block::<span class=\"hljs-title function_ invoke__\">new</span>(\n            latest_block.id + <span class=\"hljs-number\">1</span>,\n            latest_block.hash.<span class=\"hljs-title function_ invoke__\">clone</span>(),\n            data.<span class=\"hljs-title function_ invoke__\">to_owned</span>(),\n        );\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">json</span> = serde_json::<span class=\"hljs-title function_ invoke__\">to_string</span>(&#x26;block).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can jsonify request\"</span>);\n        behaviour.app.blocks.<span class=\"hljs-title function_ invoke__\">push</span>(block);\n        info!(<span class=\"hljs-string\">\"ìƒˆ ë¸”ë¡ì„ ë¸Œë¡œë“œìºìŠ¤íŒ… ì¤‘\"</span>);\n        behaviour\n            .floodsub\n            .<span class=\"hljs-title function_ invoke__\">publish</span>(BLOCK_TOPIC.<span class=\"hljs-title function_ invoke__\">clone</span>(), json.<span class=\"hljs-title function_ invoke__\">as_bytes</span>());\n    }\n}\n</code></pre>\n<h1>main.rs â€” Main Loop ë° ë¸”ë¡ ì±„êµ´</h1>\n<p>ì´ì œ 'main.rs'ë¼ëŠ” ìƒˆ íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë©”ì¸ ë£¨í”„ì™€ ë¸”ë¡ ì±„êµ´ì„ ë‹´ë‹¹í•  ê²ƒì…ë‹ˆë‹¤. ì½”ì–´ ë¡œì§ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>\n<h1>ë¸”ë¡ êµ¬ì¡°</h1>\n<p>ë¸”ë¡ êµ¬ì¡°ì²´ëŠ” ë¸”ë¡ì²´ì¸ ë‚´ì˜ ë¸”ë¡ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì´ êµ¬ì¡°ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë©ë‹ˆë‹¤:</p>\n<ul>\n<li>id: ë¸”ë¡ì˜ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤.</li>\n<li>hash: ë¸”ë¡ì˜ í•´ì‹œì…ë‹ˆë‹¤.</li>\n<li>previous_hash: ì²´ì¸ ë‚´ ì´ì „ ë¸”ë¡ì˜ í•´ì‹œì…ë‹ˆë‹¤.</li>\n<li>timestamp: ë¸”ë¡ì˜ ìƒì„± ì‹œê°„ì…ë‹ˆë‹¤.</li>\n<li>data: ë¸”ë¡ì˜ ë°ì´í„° ë˜ëŠ” í˜ì´ë¡œë“œì…ë‹ˆë‹¤.</li>\n<li>nonce: ì±„êµ´ ê³¼ì • ì¤‘ ì‚¬ìš©ë˜ëŠ” ê°’ì…ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">use</span> std::io::{Read, Write};\n<span class=\"hljs-keyword\">use</span> chrono::prelude::*;\n<span class=\"hljs-keyword\">use</span> libp2p::{\n    core::upgrade,\n    futures::StreamExt,\n    mplex,\n    noise::{Keypair, NoiseConfig, X25519Spec},\n    swarm::{Swarm, SwarmBuilder},\n    tcp::TokioTcpConfig,\n    Transport,\n};\n<span class=\"hljs-keyword\">use</span> log::{error, info, warn};\n<span class=\"hljs-keyword\">use</span> serde::{Deserialize, Serialize};\n<span class=\"hljs-keyword\">use</span> sha2::{Digest, Sha256};\n<span class=\"hljs-keyword\">use</span> std::time::Duration;\n<span class=\"hljs-keyword\">use</span> tokio::{\n    io::{stdin, AsyncBufReadExt, BufReader},\n    select, spawn,\n    sync::mpsc,\n    time::sleep,\n};\n\n<span class=\"hljs-keyword\">const</span> DIFFICULTY_PREFIX: &#x26;<span class=\"hljs-type\">str</span> = <span class=\"hljs-string\">\"00\"</span>;\n\n<span class=\"hljs-keyword\">mod</span> blockchain;\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">App</span> {\n    <span class=\"hljs-keyword\">pub</span> blocks: <span class=\"hljs-type\">Vec</span>&#x3C;Block>,\n}\n\n<span class=\"hljs-meta\">#[derive(Serialize, Deserialize, Debug, Clone)]</span>\n<span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">Block</span> {\n    <span class=\"hljs-keyword\">pub</span> id: <span class=\"hljs-type\">u64</span>,\n    <span class=\"hljs-keyword\">pub</span> hash: <span class=\"hljs-type\">String</span>,\n    <span class=\"hljs-keyword\">pub</span> previous_hash: <span class=\"hljs-type\">String</span>,\n    <span class=\"hljs-keyword\">pub</span> timestamp: <span class=\"hljs-type\">i64</span>,\n    <span class=\"hljs-keyword\">pub</span> data: <span class=\"hljs-type\">String</span>,\n    <span class=\"hljs-keyword\">pub</span> nonce: <span class=\"hljs-type\">u64</span>,\n}\n</code></pre>\n<h1>ë¸”ë¡ ìƒì„± (ìƒˆë¡œìš´ ê¸°ëŠ¥)</h1>\n<p>ë¸”ë¡ êµ¬í˜„ ë¸”ë¡(DOM)ì— ìˆëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ mine_block í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë¸”ë¡ì˜ í•´ì‹œì™€ ë…¼ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ì†ì„±ë“¤ì€ ì…ë ¥ ê°’ê³¼ í˜„ì¬ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">Block</span> {\n    <span class=\"hljs-keyword\">pub</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>(id: <span class=\"hljs-type\">u64</span>, previous_hash: <span class=\"hljs-type\">String</span>, data: <span class=\"hljs-type\">String</span>) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-keyword\">Self</span> {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">now</span> = Utc::<span class=\"hljs-title function_ invoke__\">now</span>();\n        <span class=\"hljs-keyword\">let</span> (nonce, hash) = <span class=\"hljs-title function_ invoke__\">mine_block</span>(id, now.<span class=\"hljs-title function_ invoke__\">timestamp</span>(), &#x26;previous_hash, &#x26;data);\n        <span class=\"hljs-keyword\">Self</span> {\n            id,\n            hash,\n            timestamp: now.<span class=\"hljs-title function_ invoke__\">timestamp</span>(),\n            previous_hash,\n            data,\n            nonce,\n        }\n    }\n}\n</code></pre>\n<h1>í•´ì‹œ ê³„ì‚° (calculate_hash í•¨ìˆ˜)</h1>\n<p><code>calculate_hash</code> í•¨ìˆ˜ëŠ” ë¸”ë¡ì˜ í•´ì‹œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì˜ ì†ì„±ì„ JSON ê°ì²´ë¡œ ë§Œë“¤ê³  ì´ ë°ì´í„°ë¥¼ í•´ì‹œí•˜ê¸° ìœ„í•´ SHA-256 ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">calculate_hash</span>(id: <span class=\"hljs-type\">u64</span>, timestamp: <span class=\"hljs-type\">i64</span>, previous_hash: &#x26;<span class=\"hljs-type\">str</span>, data: &#x26;<span class=\"hljs-type\">str</span>, nonce: <span class=\"hljs-type\">u64</span>) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">Vec</span>&#x3C;<span class=\"hljs-type\">u8</span>> {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">data</span> = serde_json::json!({\n        <span class=\"hljs-string\">\"id\"</span>: id,\n        <span class=\"hljs-string\">\"previous_hash\"</span>: previous_hash,\n        <span class=\"hljs-string\">\"data\"</span>: data,\n        <span class=\"hljs-string\">\"timestamp\"</span>: timestamp,\n        <span class=\"hljs-string\">\"nonce\"</span>: nonce\n    });\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">hasher</span> = Sha256::<span class=\"hljs-title function_ invoke__\">new</span>();\n    hasher.<span class=\"hljs-title function_ invoke__\">update</span>(data.<span class=\"hljs-title function_ invoke__\">to_string</span>().<span class=\"hljs-title function_ invoke__\">as_bytes</span>());\n    hasher.<span class=\"hljs-title function_ invoke__\">finalize</span>().<span class=\"hljs-title function_ invoke__\">as_slice</span>().<span class=\"hljs-title function_ invoke__\">to_owned</span>()\n}\n</code></pre>\n<h2>ì±„êµ´ (mine_block í•¨ìˆ˜)</h2>\n<p><code>mine_block</code>ì€ ì‘ì—… ì¦ëª… ì•Œê³ ë¦¬ì¦˜ì´ êµ¬í˜„ëœ ê³³ì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” nonce ê°’ì„ ë°˜ë³µí•˜ì—¬ íŠ¹ì • ì ‘ë‘ì‚¬(ë‚œì´ë„ ì ‘ë‘ì‚¬ë¡œ ì •ì˜ë¨)ë¡œ ì‹œì‘í•˜ëŠ” í•´ì‹œë¥¼ ì°¾ìœ¼ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ìœ íš¨í•œ í•´ì‹œê°€ ë°œê²¬ë˜ë©´ í•¨ìˆ˜ëŠ” nonceì™€ í•´ë‹¹ í•´ì‹œë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">mine_block</span>(id: <span class=\"hljs-type\">u64</span>, timestamp: <span class=\"hljs-type\">i64</span>, previous_hash: &#x26;<span class=\"hljs-type\">str</span>, data: &#x26;<span class=\"hljs-type\">str</span>) <span class=\"hljs-punctuation\">-></span> (<span class=\"hljs-type\">u64</span>, <span class=\"hljs-type\">String</span>) {\n    info!(<span class=\"hljs-string\">\"ë¸”ë¡ ì±„êµ´ ì¤‘...\"</span>);\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">nonce</span> = <span class=\"hljs-number\">0</span>;\n\n    <span class=\"hljs-keyword\">loop</span> {\n        <span class=\"hljs-keyword\">if</span> nonce % <span class=\"hljs-number\">100000</span> == <span class=\"hljs-number\">0</span> {\n            info!(<span class=\"hljs-string\">\"ë…¼ìŠ¤: {}\"</span>, nonce);\n        }\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">hash</span> = <span class=\"hljs-title function_ invoke__\">calculate_hash</span>(id, timestamp, previous_hash, data, nonce);\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">binary_hash</span> = <span class=\"hljs-title function_ invoke__\">hash_to_binary_representation</span>(&#x26;hash);\n        <span class=\"hljs-keyword\">if</span> binary_hash.<span class=\"hljs-title function_ invoke__\">starts_with</span>(DIFFICULTY_PREFIX) {\n            info!(\n                <span class=\"hljs-string\">\"ì±„êµ´ ì„±ê³µ! ë…¼ìŠ¤: {}, í•´ì‹œ: {}, ì´ì§„ í•´ì‹œ: {}\"</span>,\n                nonce,\n                hex::<span class=\"hljs-title function_ invoke__\">encode</span>(&#x26;hash),\n                binary_hash\n            );\n            <span class=\"hljs-title function_ invoke__\">return</span> (nonce, hex::<span class=\"hljs-title function_ invoke__\">encode</span>(hash));\n        }\n        nonce += <span class=\"hljs-number\">1</span>;\n    }\n}\n</code></pre>\n<h1>ì´ì§„ í•´ì‹œ í‘œí˜„ (hash_to_binary_representation í•¨ìˆ˜)</h1>\n<p>í•´ì‹œë¥¼ í•´ë‹¹ ì´ì§„ í‘œí˜„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ëŠ” ì±„êµ´ ê³¼ì •ì—ì„œ í•´ì‹œê°€ ë‚œì´ë„ ì¡°ê±´ì„ ì¶©ì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">hash_to_binary_representation</span>(hash: &#x26;[<span class=\"hljs-type\">u8</span>]) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">String</span> {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">res</span>: <span class=\"hljs-type\">String</span> = <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">default</span>();\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">c</span> <span class=\"hljs-keyword\">in</span> hash {\n        res.<span class=\"hljs-title function_ invoke__\">push_str</span>(&#x26;<span class=\"hljs-built_in\">format!</span>(<span class=\"hljs-string\">\"{:b}\"</span>, c));\n    }\n    res\n}\n</code></pre>\n<h1>ì œë„¤ì‹œìŠ¤ ë¸”ë¡ (genesis í•¨ìˆ˜)</h1>\n<p>ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì—ì„œ ì²« ë²ˆì§¸ ë¸”ë¡ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¡œ, ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì´ë¼ê³  ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ì´ ë¸”ë¡ì€ ìˆ˜ë™ìœ¼ë¡œ ë¸”ë¡ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">impl</span> <span class=\"hljs-title class_\">App</span> {\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">new</span>() <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-keyword\">Self</span> {\n        <span class=\"hljs-keyword\">Self</span> { blocks: <span class=\"hljs-built_in\">vec!</span>[] }\n    }\n\n    <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">genesis</span>(&#x26;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>) {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">genesis_block</span> = Block {\n            id: <span class=\"hljs-number\">0</span>,\n            timestamp: Utc::<span class=\"hljs-title function_ invoke__\">now</span>().<span class=\"hljs-title function_ invoke__\">timestamp</span>(),\n            previous_hash: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">from</span>(<span class=\"hljs-string\">\"genesis\"</span>),\n            data: <span class=\"hljs-type\">String</span>::<span class=\"hljs-title function_ invoke__\">from</span>(<span class=\"hljs-string\">\"genesis!\"</span>),\n            nonce: <span class=\"hljs-number\">2836</span>,\n            hash: <span class=\"hljs-string\">\"0000f816a87f806bb0073dcf026a64fb40c946b5abee2573702828694d5b4c43\"</span>.<span class=\"hljs-title function_ invoke__\">to_string</span>(),\n        };\n        <span class=\"hljs-keyword\">self</span>.blocks.<span class=\"hljs-title function_ invoke__\">push</span>(genesis_block);\n    }\n</code></pre>\n<h1>ë¸”ë¡ ì¶”ê°€í•˜ê¸° (try_add_block í•¨ìˆ˜)</h1>\n<p><code>try_add_block</code> í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì— ìƒˆë¡œìš´ ë¸”ë¡ì„ ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë¨¼ì €, ìƒˆë¡œìš´ ë¸”ë¡ì„ ìµœì‹  ë¸”ë¡ê³¼ ê²€ì¦í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë¸”ë¡ì´ ìœ íš¨í•˜ë©´ ì²´ì¸ì— ì¶”ê°€ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">try_add_block</span>(&#x26;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, block: Block) {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">latest_block</span> = <span class=\"hljs-keyword\">self</span>.blocks.<span class=\"hljs-title function_ invoke__\">last</span>().<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"there is at least one block\"</span>);\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">is_block_valid</span>(&#x26;block, latest_block) {\n        <span class=\"hljs-keyword\">self</span>.blocks.<span class=\"hljs-title function_ invoke__\">push</span>(block);\n    } <span class=\"hljs-keyword\">else</span> {\n        error!(<span class=\"hljs-string\">\"could not add block - invalid\"</span>);\n    }\n}\n</code></pre>\n<h2>ë¸”ë¡ ìœ íš¨ì„± ê²€ì‚¬ (is_block_valid í•¨ìˆ˜)</h2>\n<p>ì´ í•¨ìˆ˜ëŠ” ì´ì „ ë¸”ë¡ì— ëŒ€í•´ ë¸”ë¡ì„ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒì„ í™•ì¸í•©ë‹ˆë‹¤:</p>\n<ul>\n<li>ì´ì „ í•´ì‹œ í•„ë“œëŠ” ì´ì „ ë¸”ë¡ì˜ í•´ì‹œì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.</li>\n<li>í•´ì‹œ ë‚œì´ë„ ìˆ˜ì¤€ì´ ì˜¬ë°”ë¦…ë‹ˆë‹¤.</li>\n<li>ë¸”ë¡ IDê°€ ì´ì „ ë¸”ë¡ì˜ IDë¥¼ ë”°ë¦…ë‹ˆë‹¤.</li>\n<li>ë¸”ë¡ í•´ì‹œê°€ ìœ íš¨í•©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">is_block_valid</span>(&#x26;<span class=\"hljs-keyword\">self</span>, block: &#x26;Block, previous_block: &#x26;Block) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">bool</span> {\n    <span class=\"hljs-keyword\">if</span> block.previous_hash != previous_block.hash {\n        warn!(<span class=\"hljs-string\">\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ì˜ëª»ëœ ì´ì „ í•´ì‹œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\"</span>, block.id);\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> !<span class=\"hljs-title function_ invoke__\">hash_to_binary_representation</span>(\n        &#x26;hex::<span class=\"hljs-title function_ invoke__\">decode</span>(&#x26;block.hash).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"16ì§„ìˆ˜ë¡œ ë””ì½”ë”©í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\"</span>),\n    )\n        .<span class=\"hljs-title function_ invoke__\">starts_with</span>(DIFFICULTY_PREFIX)\n    {\n        warn!(<span class=\"hljs-string\">\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìœ íš¨í•˜ì§€ ì•Šì€ ë‚œì´ë„ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\"</span>, block.id);\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> block.id != previous_block.id + <span class=\"hljs-number\">1</span> {\n        warn!(\n            <span class=\"hljs-string\">\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìµœì‹  ë¸”ë¡ ì´í›„ì˜ ë‹¤ìŒ ë¸”ë¡ì´ ì•„ë‹™ë‹ˆë‹¤: {}\"</span>,\n            block.id, previous_block.id\n        );\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> hex::<span class=\"hljs-title function_ invoke__\">encode</span>(<span class=\"hljs-title function_ invoke__\">calculate_hash</span>(\n        block.id,\n        block.timestamp,\n        &#x26;block.previous_hash,\n        &#x26;block.data,\n        block.nonce,\n    )) != block.hash\n    {\n        warn!(<span class=\"hljs-string\">\"ë¸”ë¡ IDê°€ {}ì¸ ë¸”ë¡ì€ ìœ íš¨í•˜ì§€ ì•Šì€ í•´ì‹œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\"</span>, block.id);\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n    }\n    <span class=\"hljs-literal\">true</span>\n}\n</code></pre>\n<h1>ì²´ì¸ ìœ íš¨ì„± ê²€ì‚¬ (is_chain_valid í•¨ìˆ˜)</h1>\n<p>is_chain_validëŠ” ì „ì²´ ë¸”ë¡ ì²´ì¸ì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤. ë¸”ë¡ì²´ì¸ì´ ì¼ê´€ì ì´ê³  ìœ íš¨í•œ ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">is_chain_valid</span>(&#x26;<span class=\"hljs-keyword\">self</span>, chain: &#x26;[Block]) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">bool</span> {\n    <span class=\"hljs-keyword\">for</span> <span class=\"hljs-variable\">i</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-number\">0</span>..chain.<span class=\"hljs-title function_ invoke__\">len</span>() {\n        <span class=\"hljs-keyword\">if</span> i == <span class=\"hljs-number\">0</span> {\n            <span class=\"hljs-keyword\">continue</span>;\n        }\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">first</span> = chain.<span class=\"hljs-title function_ invoke__\">get</span>(i - <span class=\"hljs-number\">1</span>).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"has to exist\"</span>);\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">second</span> = chain.<span class=\"hljs-title function_ invoke__\">get</span>(i).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"has to exist\"</span>);\n        <span class=\"hljs-keyword\">if</span> !<span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">is_block_valid</span>(second, first) {\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">false</span>;\n        }\n    }\n    <span class=\"hljs-literal\">true</span>\n}\n</code></pre>\n<h1>ì²´ì¸ ì„ íƒ (choose_chain í•¨ìˆ˜)</h1>\n<p>ì´ í•¨ìˆ˜ëŠ” ë¸”ë¡ì²´ì¸ì˜ ì—¬ëŸ¬ ë²„ì „ì´ ì¶©ëŒí•˜ëŠ” ê²½ìš° í•´ê²°í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. í•­ìƒ ê°€ì¥ ê¸´ ìœ íš¨í•œ ì²´ì¸ì„ ì„ íƒí•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-comment\">// í•­ìƒ ê°€ì¥ ê¸´ ìœ íš¨í•œ ì²´ì¸ì„ ì„ íƒí•©ë‹ˆë‹¤</span>\n<span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">choose_chain</span>(&#x26;<span class=\"hljs-keyword\">mut</span> <span class=\"hljs-keyword\">self</span>, local: <span class=\"hljs-type\">Vec</span>&#x3C;Block>, remote: <span class=\"hljs-type\">Vec</span>&#x3C;Block>) <span class=\"hljs-punctuation\">-></span> <span class=\"hljs-type\">Vec</span>&#x3C;Block> {\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">is_local_valid</span> = <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">is_chain_valid</span>(&#x26;local);\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">is_remote_valid</span> = <span class=\"hljs-keyword\">self</span>.<span class=\"hljs-title function_ invoke__\">is_chain_valid</span>(&#x26;remote);\n\n    <span class=\"hljs-keyword\">if</span> is_local_valid &#x26;&#x26; is_remote_valid {\n        <span class=\"hljs-keyword\">if</span> local.<span class=\"hljs-title function_ invoke__\">len</span>() >= remote.<span class=\"hljs-title function_ invoke__\">len</span>() {\n            local\n        } <span class=\"hljs-keyword\">else</span> {\n            remote\n        }\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> is_remote_valid &#x26;&#x26; !is_local_valid {\n        remote\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> !is_remote_valid &#x26;&#x26; is_local_valid {\n        local\n    } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-built_in\">panic!</span>(<span class=\"hljs-string\">\"ë¡œì»¬ ë° ì›ê²© ì²´ì¸ì´ ëª¨ë‘ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\"</span>);\n    }\n}\n</code></pre>\n<h1>ë©”ì¸ ê¸°ëŠ¥ ë° ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí‚¹</h1>\n<p>ì£¼ìš” ê¸°ëŠ¥ì€ ë¸”ë¡ì²´ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë„¤íŠ¸ì›Œí‚¹ ë° ì´ë²¤íŠ¸ ì²˜ë¦¬ ë¶€ë¶„ì„ ì„¤ì •í•©ë‹ˆë‹¤. í† í‚¤ì˜¤(tokio)ì™€ ë¦½íˆ¬í”¼(libp2p) ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ í”¼ì–´ ê°„ ìƒí˜¸ ì‘ìš©ì„ ê´€ë¦¬í•˜ë©°, ì²´ì¸ ìš”ì²­ ë° ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ì™€ ê°™ì€ ì´ë²¤íŠ¸ì— ì‘ë‹µí•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-rust\"><span class=\"hljs-meta\">#[tokio::main]</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title function_\">main</span>() {\n    pretty_env_logger::<span class=\"hljs-title function_ invoke__\">init</span>();\n\n    info!(<span class=\"hljs-string\">\"Peer Id: {}\"</span>, blockchain::PEER_ID.<span class=\"hljs-title function_ invoke__\">clone</span>());\n    <span class=\"hljs-keyword\">let</span> (response_sender, <span class=\"hljs-keyword\">mut</span> response_rcv) = mpsc::<span class=\"hljs-title function_ invoke__\">unbounded_channel</span>();\n    <span class=\"hljs-keyword\">let</span> (init_sender, <span class=\"hljs-keyword\">mut</span> init_rcv) = mpsc::<span class=\"hljs-title function_ invoke__\">unbounded_channel</span>();\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">auth_keys</span> = Keypair::&#x3C;X25519Spec>::<span class=\"hljs-title function_ invoke__\">new</span>()\n        .<span class=\"hljs-title function_ invoke__\">into_authentic</span>(&#x26;blockchain::KEYS)\n        .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can create auth keys\"</span>);\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">transp</span> = TokioTcpConfig::<span class=\"hljs-title function_ invoke__\">new</span>()\n        .<span class=\"hljs-title function_ invoke__\">upgrade</span>(upgrade::Version::V1)\n        .<span class=\"hljs-title function_ invoke__\">authenticate</span>(NoiseConfig::<span class=\"hljs-title function_ invoke__\">xx</span>(auth_keys).<span class=\"hljs-title function_ invoke__\">into_authenticated</span>())\n        .<span class=\"hljs-title function_ invoke__\">multiplex</span>(mplex::MplexConfig::<span class=\"hljs-title function_ invoke__\">new</span>())\n        .<span class=\"hljs-title function_ invoke__\">boxed</span>();\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">behaviour</span> = blockchain::AppBehaviour::<span class=\"hljs-title function_ invoke__\">new</span>(App::<span class=\"hljs-title function_ invoke__\">new</span>(), response_sender, init_sender.<span class=\"hljs-title function_ invoke__\">clone</span>()).<span class=\"hljs-keyword\">await</span>;\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">swarm</span> = SwarmBuilder::<span class=\"hljs-title function_ invoke__\">new</span>(transp, behaviour, *blockchain::PEER_ID)\n        .<span class=\"hljs-title function_ invoke__\">executor</span>(<span class=\"hljs-type\">Box</span>::<span class=\"hljs-title function_ invoke__\">new</span>(|fut| {\n            <span class=\"hljs-title function_ invoke__\">spawn</span>(fut);\n        }))\n        .<span class=\"hljs-title function_ invoke__\">build</span>();\n\n    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-keyword\">mut </span><span class=\"hljs-variable\">stdin</span> = BufReader::<span class=\"hljs-title function_ invoke__\">new</span>(<span class=\"hljs-title function_ invoke__\">stdin</span>()).<span class=\"hljs-title function_ invoke__\">lines</span>();\n\n    Swarm::<span class=\"hljs-title function_ invoke__\">listen_on</span>(\n        &#x26;<span class=\"hljs-keyword\">mut</span> swarm,\n        <span class=\"hljs-string\">\"/ip4/0.0.0.0/tcp/0\"</span>\n            .<span class=\"hljs-title function_ invoke__\">parse</span>()\n            .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can get a local socket\"</span>),\n    )\n        .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"swarm can be started\"</span>);\n\n    <span class=\"hljs-title function_ invoke__\">spawn</span>(<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">move</span> {\n        <span class=\"hljs-title function_ invoke__\">sleep</span>(Duration::<span class=\"hljs-title function_ invoke__\">from_secs</span>(<span class=\"hljs-number\">1</span>)).<span class=\"hljs-keyword\">await</span>;\n        info!(<span class=\"hljs-string\">\"sending init event\"</span>);\n        init_sender.<span class=\"hljs-title function_ invoke__\">send</span>(<span class=\"hljs-literal\">true</span>).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can send init event\"</span>);\n    });\n\n    <span class=\"hljs-keyword\">loop</span> {\n        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">evt</span> = {\n            <span class=\"hljs-built_in\">select!</span> {\n                line = stdin.<span class=\"hljs-title function_ invoke__\">next_line</span>() => <span class=\"hljs-title function_ invoke__\">Some</span>(blockchain::EventType::<span class=\"hljs-title function_ invoke__\">Input</span>(line.<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can get line\"</span>).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can read line from stdin\"</span>))),\n                response = response_rcv.<span class=\"hljs-title function_ invoke__\">recv</span>() => {\n                    <span class=\"hljs-title function_ invoke__\">Some</span>(blockchain::EventType::<span class=\"hljs-title function_ invoke__\">LocalChainResponse</span>(response.<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"response exists\"</span>)))\n                },\n                _init = init_rcv.<span class=\"hljs-title function_ invoke__\">recv</span>() => {\n                    <span class=\"hljs-title function_ invoke__\">Some</span>(blockchain::EventType::Init)\n                }\n                event = swarm.<span class=\"hljs-title function_ invoke__\">select_next_some</span>() => {\n                    info!(<span class=\"hljs-string\">\"Unhandled Swarm Event: {:?}\"</span>, event);\n                    <span class=\"hljs-literal\">None</span>\n                },\n            }\n        };\n\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">Some</span>(event) = evt {\n            <span class=\"hljs-keyword\">match</span> event {\n                blockchain::EventType::Init => {\n                    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">peers</span> = blockchain::<span class=\"hljs-title function_ invoke__\">get_list_peers</span>(&#x26;swarm);\n                    swarm.<span class=\"hljs-title function_ invoke__\">behaviour_mut</span>().app.<span class=\"hljs-title function_ invoke__\">genesis</span>();\n\n                    info!(<span class=\"hljs-string\">\"connected nodes: {}\"</span>, peers.<span class=\"hljs-title function_ invoke__\">len</span>());\n                    <span class=\"hljs-keyword\">if</span> !peers.<span class=\"hljs-title function_ invoke__\">is_empty</span>() {\n                        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">req</span> = blockchain::LocalChainRequest {\n                            from_peer_id: peers\n                                .<span class=\"hljs-title function_ invoke__\">iter</span>()\n                                .<span class=\"hljs-title function_ invoke__\">last</span>()\n                                .<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"at least one peer\"</span>)\n                                .<span class=\"hljs-title function_ invoke__\">to_string</span>(),\n                        };\n\n                        <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">json</span> = serde_json::<span class=\"hljs-title function_ invoke__\">to_string</span>(&#x26;req).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can jsonify request\"</span>);\n                        swarm\n                            .<span class=\"hljs-title function_ invoke__\">behaviour_mut</span>()\n                            .floodsub\n                            .<span class=\"hljs-title function_ invoke__\">publish</span>(blockchain::CHAIN_TOPIC.<span class=\"hljs-title function_ invoke__\">clone</span>(), json.<span class=\"hljs-title function_ invoke__\">as_bytes</span>());\n                    }\n                }\n                blockchain::EventType::<span class=\"hljs-title function_ invoke__\">LocalChainResponse</span>(resp) => {\n                    <span class=\"hljs-keyword\">let</span> <span class=\"hljs-variable\">json</span> = serde_json::<span class=\"hljs-title function_ invoke__\">to_string</span>(&#x26;resp).<span class=\"hljs-title function_ invoke__\">expect</span>(<span class=\"hljs-string\">\"can jsonify response\"</span>);\n                    swarm\n                        .<span class=\"hljs-title function_ invoke__\">behaviour_mut</span>()\n                        .floodsub\n                        .<span class=\"hljs-title function_ invoke__\">publish</span>(blockchain::CHAIN_TOPIC.<span class=\"hljs-title function_ invoke__\">clone</span>(), json.<span class=\"hljs-title function_ invoke__\">as_bytes</span>());\n                }\n                blockchain::EventType::<span class=\"hljs-title function_ invoke__\">Input</span>(line) => <span class=\"hljs-keyword\">match</span> line.<span class=\"hljs-title function_ invoke__\">as_str</span>() {\n                    <span class=\"hljs-string\">\"ls p\"</span> => blockchain::<span class=\"hljs-title function_ invoke__\">handle_print_peers</span>(&#x26;swarm),\n                    cmd <span class=\"hljs-keyword\">if</span> cmd.<span class=\"hljs-title function_ invoke__\">starts_with</span>(<span class=\"hljs-string\">\"ls c\"</span>) => blockchain::<span class=\"hljs-title function_ invoke__\">handle_print_chain</span>(&#x26;swarm),\n                    cmd <span class=\"hljs-keyword\">if</span> cmd.<span class=\"hljs-title function_ invoke__\">starts_with</span>(<span class=\"hljs-string\">\"create b\"</span>) => blockchain::<span class=\"hljs-title function_ invoke__\">handle_create_block</span>(cmd, &#x26;<span class=\"hljs-keyword\">mut</span> swarm),\n                    _ => error!(<span class=\"hljs-string\">\"unknown command\"</span>),\n                },\n            }\n        }\n    }\n}\n</code></pre>\n<p>ì™€ìš°, ì´ê²ƒ ì°¸ ë§ì´ë„¤ìš”!</p>\n<p>ë‚´ GitHub ì €ì¥ì†Œì—ì„œ ì™„ì „í•œ êµ¬í˜„ì„ ì°¾ì„ ìˆ˜ ìˆì–´ìš”: <a href=\"https://github.com/luishsr/rustychain\" rel=\"nofollow\" target=\"_blank\">ë£¨ìŠ¤í‹°ì²´ì¸</a>.</p>\n<h2>ë¸”ë¡ì²´ì¸ í…ŒìŠ¤íŠ¸</h2>\n<p>Rustë¡œ ì œê³µëœ ë¸”ë¡ì²´ì¸ êµ¬í˜„ì„ ì‚¬ìš©í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ í™˜ê²½ ì„¤ì •, ë…¸ë“œ ì‹œì‘ ë° ìƒí˜¸ ì‘ìš©í•˜ëŠ” ì¼ë ¨ì˜ ë‹¨ê³„ë¥¼ ë”°ë¼ì•¼ í•´ìš”. ì‹œì‘í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ë¹ ë¥¸ ê°€ì´ë“œë¥¼ ì œê³µí• ê²Œìš”:</p>\n<h2>ë‹¨ì¼ ë…¸ë“œ ì‹¤í–‰</h2>\n<ul>\n<li><strong>ì»´íŒŒì¼ ë° ì‹¤í–‰</strong>: Rust ë¸”ë¡ì²´ì¸ ì½”ë“œê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•œ í›„ cargo buildë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì»´íŒŒì¼ì´ ì™„ë£Œë˜ë©´ cargo runì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</li>\n<li><strong>ì´ˆê¸° í…ŒìŠ¤íŠ¸</strong>: ì²˜ìŒì—ëŠ” ì œë„¤ì‹œìŠ¤ ë¸”ë¡ì´ ì˜¬ë°”ë¥´ê²Œ ìƒì„±ë˜ê³  ë…¸ë“œê°€ ì œëŒ€ë¡œ ì‹œì‘ë˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë‹¨ì¼ ë…¸ë“œë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤. ë§Œì•½ êµ¬í˜„ë˜ì–´ ìˆë‹¤ë©´ í˜„ì¬ ì²´ì¸ì´ë‚˜ ë…¸ë“œ ìƒíƒœë¥¼ í‘œì‹œí•˜ëŠ” ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h1>ì—¬ëŸ¬ ë…¸ë“œ ì‹¤í–‰í•˜ê¸°</h1>\n<p>ì‹¤ì œ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ë ¤ë©´ ì—¬ëŸ¬ ë…¸ë“œë¥¼ ë™ì‹œì— ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li><strong>ì—¬ëŸ¬ í„°ë¯¸ë„ ì—´ê¸°</strong>: ì—¬ëŸ¬ í„°ë¯¸ë„ ì°½ ë˜ëŠ” íƒ­ì„ì—´ì–´ì£¼ì„¸ìš”. ê°ê°ì€ ë„¤íŠ¸ì›Œí¬ì—ì„œ ë³„ê°œì˜ ë…¸ë“œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>\n<li><strong>ë…ë¦½ì ìœ¼ë¡œ ë…¸ë“œ ì‹¤í–‰</strong>: ê° í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ê³  cargo runì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ê° ì¸ìŠ¤í„´ìŠ¤ëŠ” ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì˜ ë³„ê°œ ë…¸ë“œë¡œ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.</li>\n</ul>\n<h1>ë…¸ë“œì™€ ìƒí˜¸ì‘ìš©í•˜ê¸°</h1>\n<p>ë¸”ë¡ì²´ì¸ì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë…¸ë“œì™€ ìƒí˜¸ì‘ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<ul>\n<li>ìƒˆ ë¸”ë¡ ìƒì„±: êµ¬í˜„ëœ ëª…ë ¹ì–´(ì˜ˆ: <code>data</code>ë¥¼ ì´ìš©í•œ <code>create b</code>)ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ ë¸”ë¡ì„ ìƒì„±í•˜ì„¸ìš”. ì´ëŠ” ë¸”ë¡ì²´ì¸ì— ê±°ë˜ë‚˜ ë°ì´í„° ì¶”ê°€ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•  ê²ƒì…ë‹ˆë‹¤.</li>\n<li>ë¸”ë¡ ì „íŒŒ: í•œ ë…¸ë“œì—ì„œ ìƒˆ ë¸”ë¡ì´ ìƒì„±ë˜ë©´ ì´ ë¸”ë¡ì„ ë‹¤ë¥¸ ë…¸ë“œì— ì „íŒŒí•´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ë…¸ë“œê°€ ì´ ìƒˆ ë¸”ë¡ì„ ìˆ˜ì‹ í•˜ê³  ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ì—¬ ìì‹ ì˜ ë¸”ë¡ì²´ì¸ ë²„ì „ì— ì¶”ê°€í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</li>\n<li>ë¸”ë¡ì²´ì¸ ìƒíƒœ ë³´ê¸°: ì •ê¸°ì ìœ¼ë¡œ ê° ë…¸ë“œì˜ ë¸”ë¡ì²´ì¸ í˜„ì¬ ìƒíƒœë¥¼ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. ë…¸ë“œ ê°„ì— ì¼ê´€ì„±ì´ ìˆì–´ì•¼í•˜ë©° ìµœì‹  ìœ íš¨ ë¸”ë¡ì„ ë°˜ì˜í•´ì•¼ í•©ë‹ˆë‹¤.</li>\n<li>ì²´ì¸ ì¶©ëŒ í…ŒìŠ¤íŠ¸: ì„œë¡œ ë‹¤ë¥¸ ë…¸ë“œì—ì„œ ë™ì‹œì— ë‹¤ë¥¸ ë¸”ë¡ì„ ìƒì„±í•˜ì—¬ ì²´ì¸ ì¶©ëŒì„ ì‹œë®¬ë ˆì´íŠ¸í•˜ì„¸ìš”. êµ¬í˜„ì´ ì´ëŸ¬í•œ ì¶©ëŒì„ í•´ê²°í•˜ëŠ” ë°©ì‹(ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ê¸´ ìœ íš¨ ì²´ì¸ì„ ì„ íƒí•¨)ì„ ê´€ì°°í•˜ì„¸ìš”.</li>\n</ul>\n<h1>ğŸš€ ë£¨ì´ìŠ¤ ì†Œì•„ë ˆìŠ¤ì— ì˜í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë° ê¸°íƒ€ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤ íƒìƒ‰í•˜ê¸°</h1>\n<p>ğŸ“š í•™ìŠµ í”Œë«í¼: ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ, í´ë¼ìš°ë“œ ì»´í“¨íŒ…, ì‚¬ì´ë²„ ë³´ì•ˆ, ë¸”ë¡ì²´ì¸, ë¦¬ëˆ…ìŠ¤ ë“± ë‹¤ì–‘í•œ ê¸°ìˆ  ë¶„ì•¼ì—ì„œ ì§€ì‹ì„ ë„“íˆì„¸ìš”. ì €ì˜ í¬ê´„ì ì¸ ìë£Œ ëª¨ìŒì„ í†µí•´:</p>\n<ul>\n<li>GitHub ë¦¬í¬ì§€í† ë¦¬ì™€ í•¨ê»˜ í•˜ëŠ” ì‹¤ìŠµ íŠœí† ë¦¬ì–¼: ì „ìš© GitHub ë¦¬í¬ì§€í† ë¦¬ë¥¼ í†µí•´ ë‹¨ê³„ë³„ ì‹¤ìŠµì„ í†µí•´ ë‹¤ì–‘í•œ ê¸°ìˆ ì„ ì‹¤ìš©ì ìœ¼ë¡œ ìµí ìˆ˜ ìˆìŠµë‹ˆë‹¤. <a href=\"%EB%A7%81%ED%81%AC\">íŠœí† ë¦¬ì–¼ ì ‘ê·¼í•˜ê¸°</a></li>\n<li>ì‹¬ì¸µ ì•ˆë‚´ì„œ ë° ê¸°ì‚¬: ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ, í´ë¼ìš°ë“œ ì»´í“¨íŒ… ë“±ì˜ í•µì‹¬ ê°œë…ì„ ìì„¸íˆ ë‹¤ë£¬ ì•ˆë‚´ì„œì™€ ì‹¤ì œ ì˜ˆì œê°€ í’ë¶€í•œ ê¸°ì‚¬ë¡œ ê¹Šê²Œ íŒŒë³´ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">ë” ì½ê¸°</a></li>\n<li>ì „ìì±… ëª¨ìŒì§‘: \"ëŸ¬ìŠ¤íŠ¸ ì†Œìœ ê¶Œ ë§ˆìŠ¤í„°í•˜ê¸°\" ë° \"ì• í”Œë¦¬ì¼€ì´ì…˜ ë³´ì•ˆ ì•ˆë‚´ì„œ\"ì™€ ê°™ì€ ì œëª©ì„ í¬í•¨í•œ ë¬´ë£Œ ì „ìì±… ì‹œë¦¬ì¦ˆë¡œ ë‹¤ì–‘í•œ ê¸°ìˆ  ë¶„ì•¼ì˜ ì´í•´ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">ì „ìì±… ë‹¤ìš´ë¡œë“œ</a></li>\n<li>í”„ë¡œì íŠ¸ ì‡¼ì¼€ì´ìŠ¤: API ê²Œì´íŠ¸ì›¨ì´, ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬, ì‚¬ì´ë²„ ë³´ì•ˆ ë„êµ¬, í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë“±ê³¼ ê°™ì´ ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì™„ì „ ê¸°ëŠ¥ í”„ë¡œì íŠ¸ë¥¼ ë°œê²¬í•˜ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">í”„ë¡œì íŠ¸ ë³´ê¸°</a></li>\n<li>LinkedIn ë‰´ìŠ¤ë ˆí„°: LinkedInì—ì„œ ì œ ë‰´ìŠ¤ë ˆí„°ë¥¼ êµ¬ë…í•˜ì—¬ ëŸ¬ìŠ¤íŠ¸, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë° ì‹ í¥ ê¸°ìˆ ì— ê´€í•œ ê·œì¹™ì ì¸ ì—…ë°ì´íŠ¸ì™€ í†µì°°ë ¥ì„ ìœ ì§€í•˜ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">ì—¬ê¸°ì„œ êµ¬ë…í•˜ê¸°</a></li>\n</ul>\n<p>ğŸ”— ì €ì™€ ì—°ê²°í•´ë³´ì„¸ìš”:</p>\n<ul>\n<li>Medium: ë¯¸ë””ì—„ì—ì„œ ì œ ê¸€ì„ ì½ê³  ìœ ìš©í•˜ë‹¤ê³  ìƒê°í•˜ë©´ ë°•ìˆ˜ë¥¼ ë³´ë‚´ì£¼ì„¸ìš”. ì´ëŠ” ì €ì—ê²Œ ê¸€ì“°ê¸°ì™€ ëŸ¬ìŠ¤íŠ¸ ì½˜í…ì¸  ê³µìœ ë¥¼ ê³„ì† ì´ëŒì–´ì£¼ëŠ” ì›ë™ë ¥ì´ ë©ë‹ˆë‹¤. <a href=\"%EB%A7%81%ED%81%AC\">Medium íŒ”ë¡œìš°í•˜ê¸°</a></li>\n<li>ê°œì¸ ë¸”ë¡œê·¸: ì œ ê°œì¸ ë¸”ë¡œê·¸ì—ì„œ ë” ë§ì€ ëŸ¬ìŠ¤íŠ¸ ê´€ë ¨ ì½˜í…ì¸ ë¥¼ í™•ì¸í•˜ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">ë¸”ë¡œê·¸ ë°©ë¬¸í•˜ê¸°</a></li>\n<li>LinkedIn: ë” ë§ì€ í†µì°°ë ¥ ìˆëŠ” í† ë¡ ê³¼ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ ì œ ì „ë¬¸ ë„¤íŠ¸ì›Œí¬ì— ì°¸ì—¬í•˜ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">LinkedIn ì—°ê²°í•˜ê¸°</a></li>\n<li>íŠ¸ìœ„í„°: ë¹ ë¥¸ ì—…ë°ì´íŠ¸ì™€ ëŸ¬ìŠ¤íŠ¸ í”„ë¡œê·¸ë˜ë°ì— ëŒ€í•œ ìƒê°ì„ ë³´ë ¤ë©´ íŠ¸ìœ„í„°ì—ì„œ ì €ë¥¼ íŒ”ë¡œìš°í•˜ì„¸ìš”. <a href=\"%EB%A7%81%ED%81%AC\">íŠ¸ìœ„í„°ì—ì„œ íŒ”ë¡œìš°í•˜ê¸°</a></li>\n</ul>\n<p>Wassup, folks? Feel free to leave a comment or shoot me a message!</p>\n<p>Cheers,</p>\n<p>Luis Soares\n<a href=\"mailto:luis.soares@linux.com\">luis.soares@linux.com</a></p>\n<p>Senior Software Engineer | Cloud Engineer | SRE | Tech Lead | Rust | Golang | Java | ML AI &#x26; Statistics | Web3 &#x26; Blockchain</p>\n</body>\n</html>\n"},"__N_SSG":true}